import{_ as E}from"./loading.16b03cf4.js";import{p as F,d as B,b as r,v as b,o as a,c as o,F as v,K as $,C as l,D,a as t,Q as N,m,g as u,w as d,k as O,f as P,l as z,T as M,e as j,N as I,t as K,h as L,i as T,O as R,P as H}from"./index.e2c126b3.js";import{_ as S}from"./SectionTitleLine.37c3d6bb.js";import{C as U}from"./CardBoxComponentEmpty.0271bb5f.js";import{g as Q}from"./getData.5726d001.js";const q={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},G={class:"px-3"},J={key:0},W=t("th",{class:"text-center"},"ID PRM",-1),X=t("th",null,"Proveedor",-1),Y=t("th",null,"Descripcion",-1),Z=t("th",{class:"text-center"},"Fec Ini",-1),ee=t("th",{class:"text-center"},"Fec Fin",-1),te=t("th",{class:"text-center"},"Tipo",-1),ae=t("th",{class:"text-center"},"Estado",-1),se=t("th",null,null,-1),le=["data-label"],ne=["data-label"],re=t("br",null,null,-1),oe={class:"text-sm"},ce=["data-label"],ie=["data-label"],ue=["data-label"],de=["data-label"],_e=["data-label"],me={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},he={__name:"TablePrmCapAut",props:{checkable:Boolean,promos:[Array,Object]},setup(x){const g=x,h=s=>{switch(s){case"0":return"En revisi\xF3n";case"1":return"Autorizada";case"2":return"Descartada";case"-2":return"Eliminada";case"-1":default:return"Por revisar"}},k=s=>{switch(s=parseInt(s),s){case 1:return"Precio Promoci\xF3n";case 5:return"mercanc\xEDa sin cargo";case 6:return"Precio + mercanc\xEDa sin cargo";default:return"no identificada"}},C=F(),p=B();r(!1),r(!1);const f=r(10),n=r(0),c=r([]),y=b(()=>g.promos.slice(f.value*n.value,f.value*(n.value+1))),w=b(()=>Math.ceil(g.promos.length/f.value)),V=b(()=>n.value+1),A=b(()=>{const s=[];for(let _=0;_<w.value;_++)s.push(_);return s});function i(s){let _=s.target.closest("td");p.numProm=_.getAttribute("data-label"),C.push({path:"/autorizar"})}return(s,_)=>(a(),o(v,null,[c.value.length?(a(),o("div",q,[(a(!0),o(v,null,$(c.value,e=>(a(),o("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},l(e.name),1))),128))])):D("",!0),t("table",G,[t("thead",null,[t("tr",null,[x.checkable?(a(),o("th",J)):D("",!0),W,X,Y,Z,ee,te,ae,se])]),t("tbody",null,[(a(!0),o(v,null,$(m(y),e=>(a(),o("tr",{key:e.id},[t("td",{"data-label":e.id,to:"/capturar",onClick:i,class:"cursor-pointer text-center"},l(e.id),9,le),t("td",{"data-label":e.id,onClick:i,class:"cursor-pointer"},[N(l(e.proveedor)+" ",1),re,t("span",oe,l(e.nom_prov.trim()),1)],8,ne),t("td",{"data-label":e.id,onClick:i,class:"cursor-pointer"},l(e.desProm),9,ce),t("td",{"data-label":e.id,onClick:i,class:"cursor-pointer"},l(e.fec_ini),9,ie),t("td",{"data-label":e.id,onClick:i,class:"cursor-pointer"},l(e.fec_fin),9,ue),t("td",{"data-label":e.id,class:"uppercase cursor-pointer text-center",onClick:i},l(k(e.tpoProm)),9,de),t("td",{"data-label":e.id,class:"uppercase cursor-pointer text-center",onClick:i},l(h(e.status)),9,_e)]))),128))])]),t("div",me,[u(M,null,{default:d(()=>[u(O,null,{default:d(()=>[(a(!0),o(v,null,$(m(A),e=>(a(),P(z,{key:e,active:e===n.value,label:e+1,color:e===n.value?"lightDark":"whiteDark",small:"",onClick:fe=>n.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"P\xE1gina "+l(m(V))+" de "+l(m(w)),1)]),_:1})])],64))}},pe=t("img",{src:E,alt:"",class:"block mx-auto"},null,-1),xe={__name:"ParaAutorizar",setup(x){const g=B(),h=r(!0),k=r(!1),C=b(()=>p.value),p=r([]);r("/capturar");const f=async function(){let n=await Q(K+"prom-aut?compr="+g.nomCto);if(n.ok)await n.json().then(c=>{p.value=c});else return console.log("Respuesta de red OK pero respuesta HTTP no OK"),{}};return j(async function(){await f(),k.value=Object.keys(p).length>0,h.value=!1}),(n,c)=>(a(),P(I,null,{default:d(()=>[u(L,{hasFooter:!1,modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=y=>h.value=y),blocked:!0,title:"Cargando la informaci\xF3n"},{default:d(()=>[pe]),_:1},8,["modelValue"]),u(R,null,{default:d(()=>[u(S,{icon:m(H),title:"Promociones Para Autorizar",main:""},null,8,["icon"]),k.value?(a(),P(T,{key:0,class:"mb-6","has-table":""},{default:d(()=>[u(he,{promos:m(C)},null,8,["promos"])]),_:1})):(a(),P(T,{key:1},{default:d(()=>[u(U)]),_:1}))]),_:1})]),_:1}))}};export{xe as default};
