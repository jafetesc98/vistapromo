import{_ as ge,aj as fe,b as v,ak as pe,o as g,c as x,g as m,K as X,a as e,C as b,F as K,l as z,al as he,e as ue,d as ce,v as D,w,h as W,D as R,f as ee,am as le,ah as ve,j as G,m as I,an as oe,ao as ae,ap as te,k as Z,t as re,T as me,B as Ee,A as xe,n as Ce}from"./index.543e10dd.js";import{_ as de}from"./loading.16b03cf4.js";import{_ as Be}from"./checked.4cad9791.js";import{_ as se}from"./FormField.8a723bf3.js";import{_ as J}from"./FormControl.a67f42ae.js";const Ie=""+new URL("../img/cancelar.png",import.meta.url).href,ke={components:{LitepieDatepicker:fe},props:["idDate"],setup(){const f=v([]),a=v({date:"DD MMM YYYY",month:"MMM"});return{dateValue:f,formatter:a,customShortcuts:()=>[{label:"Este mes",atClick:()=>{const r=new Date;return[new Date(r.getFullYear(),r.getMonth(),1),new Date(r.getFullYear(),r.getMonth()+1,0)]}},{label:"Los siguientes 15 d\xEDas",atClick:()=>{const r=new Date;return[r,new Date(r.getFullYear(),r.getMonth(),r.getDate()+15)]}}]}}},we={class:"flex"};function $e(f,a,u,r,E,_){const P=pe("litepie-datepicker");return g(),x("div",we,[m(P,{i18n:"es",modelValue:r.dateValue,"onUpdate:modelValue":a[0]||(a[0]=N=>r.dateValue=N),id:u.idDate,formatter:r.formatter,shortcuts:r.customShortcuts,placeholder:"Vigencia de la promoci\xF3n"},null,8,["modelValue","id","formatter","shortcuts"])])}const Cl=ge(ke,[["render",$e]]),Ae=["id","aria-describedby","value","zona"],Pe=["for","id"],Fe={__name:"SucursalCheckBox",setup(f){v("Parent");const a=v(["001","002","003","004","005","006","007","008","009","011","012","013","014","015","016","017","018","020","021","022","023","024","031","032","033","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","055","056","057","058","059","060","061","063","065","066","067","068","070","071","072","075","077","080"]);function u(r){switch(r){case"001":case"002":case"003":case"004":case"005":case"006":case"007":case"008":case"009":case"011":case"014":case"017":case"018":case"020":case"021":case"022":case"031":case"032":case"037":case"040":case"041":case"042":case"043":case"044":case"045":case"047":case"048":case"050":case"051":case"052":case"055":case"056":case"057":case"058":case"059":case"060":case"063":case"065":case"066":case"067":case"070":case"071":case"072":case"075":case"077":case"080":return 1;case"012":case"013":case"035":case"049":case"053":case"061":return 2;case"015":case"016":case"023":case"024":case"033":case"036":case"038":case"039":case"046":case"068":return 3;default:return 1}}return(r,E)=>(g(!0),x(K,null,X(a.value,_=>(g(),x("div",{key:_,class:"flex items-start items-center inline-flex mr-3 w-16"},[e("input",{id:"suc_"+_,"aria-describedby":"suc_"+_,type:"checkbox",value:_,class:"bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h1 my-1 w-4 rounded cursor-pointer py-2 disabled:opacity-50 disabled:cursor-not-allowed sucursal",zona:u(_)},null,8,Ae),e("label",{for:"suc_"+_,id:"txt_"+_,class:"text-sm py-2 pl-3 font-medium cursor-pointer"},b(_),9,Pe)]))),128))}},Se={props:{sucBase:{type:String,default:"1"}},components:{Sucursales:Fe,BaseButton:z},name:"Regiones",setup(f){return{dateValue:v([])}},methods:{seleccionarSucursales(f){let a=document.getElementById("tipo").value;switch(f.target.value){case"VALLES":if(this.marcarZona(1),a==2||a==3||a==4){let u=document.getElementById("suc_001"),r=document.getElementById("txt_001");u.style.opacity="0.5",r.style.opacity="0.5",u.disabled=!0,u.checked=!1;let E=document.getElementById("suc_002"),_=document.getElementById("txt_002");E.style.opacity="0.5",_.style.opacity="0.5",E.disabled=!0,E.checked=!1;let P=document.getElementById("suc_037"),N=document.getElementById("txt_037");P.style.opacity="0.5",N.style.opacity="0.5",P.disabled=!0,P.checked=!1;let $=document.getElementById("suc_051"),H=document.getElementById("txt_051");$.style.opacity="0.5",H.style.opacity="0.5",$.disabled=!0,$.checked=!1;let j=document.getElementById("suc_057"),k=document.getElementById("txt_057");j.style.opacity="0.5",k.style.opacity="0.5",j.disabled=!0,j.checked=!1}break;case"COSTA":if(this.marcarZona(2),a==2||a==3||a==4){let u=document.getElementById("suc_013"),r=document.getElementById("txt_013");u.style.opacity="0.5",r.style.opacity="0.5",u.disabled=!0,u.checked=!1;let E=document.getElementById("suc_053"),_=document.getElementById("txt_053");E.style.opacity="0.5",_.style.opacity="0.5",E.disabled=!0,E.checked=!1}break;case"ISTMO":if(this.marcarZona(3),a==2||a==3||a==4){let u=document.getElementById("suc_024"),r=document.getElementById("txt_024");u.style.opacity="0.5",r.style.opacity="0.5",u.disabled=!0,u.checked=!1}break;case"TODAS":this.marcarZona(4),(a==2||a==3||a==4)&&this.quitasuc();break;default:this.desactivarSucursales(!0),(a==2||a==3||a==4)&&this.quitasuc();break}},desmarcarSucursales(f){document.querySelectorAll("[zona]").forEach(u=>{u.checked=f})},desactivarSucursales(f){let a=document.querySelectorAll("[zona]");f?a.forEach(u=>{u.removeAttribute("disabled"),u.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),u.nextElementSibling.classList.add("cursor-pointer")}):a.forEach(u=>{u.setAttribute("disabled",!0),u.nextElementSibling.classList.remove("cursor-pointer"),u.nextElementSibling.classList.add("opacity-50","cursor-not-allowed")})},marcarZona(f=1){if(this.desmarcarSucursales(!1),this.desactivarSucursales(!1),f==4){document.querySelectorAll("[zona]").forEach(r=>{r.removeAttribute("disabled"),r.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),r.nextElementSibling.classList.add("cursor-pointer"),r.checked=!0});return}document.querySelectorAll('[zona="'+f+'"]').forEach(u=>{u.removeAttribute("disabled"),u.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),u.nextElementSibling.classList.add("cursor-pointer"),u.checked=!0})},personalizado(){this.desactivarSucursales(!1)},limpiar(){this.desmarcarSucursales(!1),this.desactivarSucursales(!0),document.getElementById("zona-custom").checked=!0},quitasuc(){let f=document.getElementById("suc_001"),a=document.getElementById("txt_001");f.style.opacity="0.5",a.style.opacity="0.5",f.disabled=!0,f.checked=!1;let u=document.getElementById("suc_002"),r=document.getElementById("txt_002");u.style.opacity="0.5",r.style.opacity="0.5",u.disabled=!0,u.checked=!1;let E=document.getElementById("suc_013"),_=document.getElementById("txt_013");E.style.opacity="0.5",_.style.opacity="0.5",E.disabled=!0,E.checked=!1;let P=document.getElementById("suc_024"),N=document.getElementById("txt_024");P.style.opacity="0.5",N.style.opacity="0.5",P.disabled=!0,P.checked=!1;let $=document.getElementById("suc_037"),H=document.getElementById("txt_037");$.style.opacity="0.5",H.style.opacity="0.5",$.disabled=!0,$.checked=!1;let j=document.getElementById("suc_051"),k=document.getElementById("txt_051");j.style.opacity="0.5",k.style.opacity="0.5",j.disabled=!0,j.checked=!1;let C=document.getElementById("suc_053"),O=document.getElementById("txt_053");C.style.opacity="0.5",O.style.opacity="0.5",C.disabled=!0,C.checked=!1;let T=document.getElementById("suc_057"),U=document.getElementById("txt_057");T.style.opacity="0.5",U.style.opacity="0.5",T.disabled=!0,T.checked=!1}}};document.querySelectorAll("[zona]");const Le={class:"grid grid-flow-col grid-rows-1"},Me={class:"mx-5"},Ne={class:"max-w-lg mx-auto"},Ve={class:"mb-1"},Ke=e("legend",{class:"sr-only"}," Regiones ",-1),De=e("div",{class:"mb-3"},[e("h3",null,[e("b",null,"Regiones:")])],-1),je={class:"flex items-center mb-3 pl-2"},ze=e("label",{for:"zona-valles",class:"text-sm font-medium pl-2 block"}," Valles ",-1),Te={class:"flex items-center mb-3 pl-2"},Oe=e("label",{for:"zona-costa",class:"text-sm font-medium pl-2 block"}," Costa ",-1),Re={class:"flex items-center mb-3 pl-2"},He=e("label",{for:"zona-istmo",class:"text-sm font-medium pl-2 block"}," Istmo ",-1),Ue={class:"flex items-center mb-3 pl-2"},Ze=e("label",{for:"zona-todas",class:"text-sm font-medium pl-2 block"}," Todas ",-1),Xe={class:"flex items-center mb-1 pl-2"},qe=e("label",{for:"zona-custom",class:"text-sm font-medium pl-2 block"}," Personalizado ",-1),Ye=he('<div class="max-w-lg mx-auto"><fieldset class=""><legend class="sr-only">Aplica para:</legend><div class="mt-2 mb-3"><h3><b>Aplica para:</b></h3></div><div class="flex items-start items-center mb-3 pl-2"><input id="mostrador" aria-describedby="checkbox-3" type="checkbox" name="mostrador" value="1" checked class="bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded"><label id="txtmost" for="mostrador" class="text-sm pl-3 font-medium"> Mostrador </label></div><div class="flex items-start items-center mb-3 pl-2"><input id="retail" aria-describedby="checkbox-2" type="checkbox" name="retail" value="1" class="bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded"><label for="retail" class="text-sm pl-3 font-medium"> Retail </label></div></fieldset></div>',1),Ge={class:"flex justify-center"},Je={class:"px-5 mx-5 flex flex-wrap py-12",style:{height:"fit-content",margin:"auto"}};function Qe(f,a,u,r,E,_){const P=pe("BaseButton"),N=pe("Sucursales");return g(),x("div",Le,[e("div",Me,[e("div",Ne,[e("fieldset",Ve,[Ke,De,e("div",je,[e("input",{id:"zona-valles",type:"radio",name:"zona",value:"VALLES",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-valles","aria-describedby":"zona-valles",onChange:a[0]||(a[0]=(...$)=>_.seleccionarSucursales&&_.seleccionarSucursales(...$))},null,32),ze]),e("div",Te,[e("input",{id:"zona-costa",type:"radio",name:"zona",value:"COSTA",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-costa","aria-describedby":"zona-costa",onChange:a[1]||(a[1]=(...$)=>_.seleccionarSucursales&&_.seleccionarSucursales(...$))},null,32),Oe]),e("div",Re,[e("input",{id:"zona-istmo",type:"radio",name:"zona",value:"ISTMO",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-istmo","aria-describedby":"zona-istmo",onChange:a[2]||(a[2]=(...$)=>_.seleccionarSucursales&&_.seleccionarSucursales(...$))},null,32),He]),e("div",Ue,[e("input",{id:"zona-todas",type:"radio",name:"zona",value:"TODAS",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-todas","aria-describedby":"zona-todas",onChange:a[3]||(a[3]=(...$)=>_.seleccionarSucursales&&_.seleccionarSucursales(...$))},null,32),Ze]),e("div",Xe,[e("input",{id:"zona-custom",type:"radio",name:"zona",value:"CUSTOM",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-custom","aria-describedby":"zona-custom",onChange:a[4]||(a[4]=(...$)=>_.seleccionarSucursales&&_.seleccionarSucursales(...$)),checked:""},null,32),qe]),m(P,{label:"Limpiar",id:"btn_clean_suc",otherClasses:"w-full mt-3",type:"button",small:!0,color:"info",onClick:_.limpiar},null,8,["onClick"])])]),Ye]),e("div",Ge,[e("div",Je,[m(N)])])])}const Bl=ge(Se,[["render",Qe]]),We=e("img",{src:de,alt:"",class:"block mx-auto"},null,-1),et=e("p",null,"Favor de capturar un precio diferente a los actuales",-1),tt=e("img",{src:Ie,alt:"",class:"block mx-auto"},null,-1),nt=e("p",null,"Favor de capturar uno diferente o eliminar el existente",-1),lt=e("img",{src:Be,alt:"",class:"block mx-auto"},null,-1),ot={key:0},at=e("th",null,"C\xF3digo",-1),st=e("th",null,"Emp",-1),ct=e("th",null,"Precio Actual",-1),rt=e("th",null,"Precio Oferta",-1),dt=e("th",null,"Diferencia",-1),it=e("th",null,null,-1),ut={class:"rounded"},mt={class:"w-48 align-top",rowspan:"5"},pt=["onKeyup"],gt=e("p",{class:"mt-3",id:"desc_art"},null,-1),_t=e("td",{class:"w-8 text-center",id:"emp1"}," 1 ",-1),yt=e("td",{class:"text-right px-5",id:"precio1"},null,-1),bt={class:"w-1/3"},ft=e("td",{class:"text-right px-5",id:"dif1"},null,-1),ht={class:"before:hidden lg:w-1 whitespace-nowrap"},vt=e("td",{class:"w-8 text-center",id:"emp2"}," 1 ",-1),Et=e("td",{id:"precio2",class:"text-right px-5"},null,-1),xt={"data-label":"pre_prm2"},Ct=e("td",{class:"text-right px-5",id:"dif2"},null,-1),Bt={class:"before:hidden lg:w-1 whitespace-nowrap"},It=e("td",{class:"w-8 text-center",id:"emp3"}," 1 ",-1),kt=e("td",{id:"precio3",class:"text-right px-5"},null,-1),wt=e("td",{class:"text-right px-5",id:"dif3"},null,-1),$t={class:"before:hidden lg:w-1 whitespace-nowrap"},At=e("td",{class:"w-8 text-center",id:"emp4"}," 1 ",-1),Pt=e("td",{id:"precio4",class:"text-right px-5"},null,-1),Ft={"data-label":"pre_prm2"},St=e("td",{class:"text-right px-5",id:"dif4"},null,-1),Lt={class:"before:hidden lg:w-1 whitespace-nowrap"},Mt=e("td",{class:"w-8 text-center",id:"emp5"}," 1 ",-1),Nt=e("td",{id:"precio5",class:"text-right px-5"},null,-1),Vt=e("td",{class:"text-right px-5",id:"dif5"},null,-1),Kt={class:"before:hidden lg:w-1 whitespace-nowrap"},Il={__name:"PreciosArticulosTable",props:{checkable:Boolean,arts:Array},setup(f){const a=f;ue(()=>{document.getElementsByClassName("pre"),document.getElementsByClassName("per")});const u=ce();D(()=>u.clients),v(!1);const r=v(!1),E=v(!1),_=v(!1),P=v(!1),N=v(!0),$=v(!1),H=v("");async function j(o){let c=document.getElementById("sucbase").value,d=document.querySelectorAll(".sucursal");var h=0;for(let L=0;L<d.length;L++)d[L].checked&&h++;if(console.log(h),h==1){for(let L=0;L<d.length;L++)if(d[L].checked){c=d[L].value;break}}else c=document.getElementById("sucbase").value;let A=document.getElementById("prov").value.slice(0,9);await C(o.target.value,c,A)}var k={};async function C(o,c,d){let h="otro";$.value=!0,fetch(re+"art?art="+o+"&suc="+c+"&prov="+d+"&emp_cob="+h).then(function(A){$.value=!1,A.ok?(U(),A.json().then(L=>{k=L;let ie=Q(k);ie&&(document.getElementById("pre_prom1").focus(),document.getElementsByName("tipo")[0].value!="6"?N.value=!1:O()),T(ie)})):(A.json().then(async L=>{console.log(L),document.getElementById("desc_art").textContent=L.message,H.value=L.message,P.value=!0,await B(1500),P.value=!1,document.getElementsByName("tipo")[0].value=="6"&&O(-1)}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(A){console.log("Hubo un problema con la petici\xF3n Fetch:"+A.message)})}function O(o=0){if(o==-1){document.getElementById("cod_cob").value=null,document.getElementById("desc_art_cob").value=null;return}document.getElementById("cod_cob").value=k.art,document.getElementById("desc_art_cob").value=k.des1}function T(o){let c=document.getElementsByClassName("per"),d=document.getElementsByClassName("pre");[].forEach.call(c,h=>{o?h.removeAttribute("disabled"):h.setAttribute("disabled",!0),h.value=""}),[].forEach.call(d,h=>{o?h.removeAttribute("disabled"):h.setAttribute("disabled",!0),h.value=""})}function U(){for(let o=1;o<6;o++){let c=document.getElementById("precio"+o);c.textContent="";let d=document.getElementById("pre_prom"+o);d.classList.remove("ring","ring-red-500"),d.value="";let h=document.getElementById("emp"+o);h.textContent="";let A=document.getElementById("porcen_prom"+o);A.classList.remove("ring","ring-red-500"),A.value="",document.getElementById("dif"+o).textContent=""}}function Q(o){return o.des1?(document.getElementById("desc_art").textContent=o.des1,document.getElementById("emp1").textContent=o.cant_pre0,document.getElementById("emp2").textContent=o.cant_pre1,document.getElementById("emp3").textContent=o.cant_pre2,document.getElementById("emp4").textContent=o.cant_pre3,document.getElementById("emp5").textContent=o.cant_pre4,document.getElementById("precio1").textContent=S(o.precio_vta0),document.getElementById("precio2").textContent=S(o.precio_vta1),document.getElementById("precio3").textContent=S(o.precio_vta2),document.getElementById("precio4").textContent=S(o.precio_vta3),document.getElementById("precio5").textContent=S(o.precio_vta4),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(o){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(o)}const F=function(o){var c=["-","+","e","ArrowDown","ArrowUp"];c.includes(o.key)&&o.preventDefault()},V=function(o){if(o.key=="Enter"||o.key=="ArrowDown"){let c=o.target.id,d=parseInt(c.slice(-1));if(d<5){d++;let h=c.slice(0,-1)+d;document.getElementById(h).focus();return}d==5&&document.getElementById("btn_add").focus()}if(o.key=="ArrowUp"){let c=o.target.id,d=parseInt(c.slice(-1));if(d>1){d--;let h=c.slice(0,-1)+d;document.getElementById(h).focus()}else d==1&&document.getElementById("inputConsultar").focus()}},i=function(o){let c=o.target.id.slice(-1),d=document.getElementById("pre_prom"+c),h=document.getElementById("porcen_prom"+c),A=document.getElementById("precio"+c).textContent.slice(1);A=A.replace(",",""),A=parseFloat(A);let L={};o.target==d?(L=n(A,d.value,""),h.value=L.porcentaje):(L=n(A,"",h.value),d.value=L.precio),document.getElementById("dif"+c).textContent=S(L.neta)};function n(o,c,d){let h={};if(c!="")h.precio=c,h.neta=Number((o-c).toFixed(4)).toFixed(4),h.porcentaje=Number((100-c*100/o).toFixed(4)).toFixed(4);else{let A=Number(o.toFixed(4)-(o*d/100).toFixed(4)).toFixed(4);h.precio=A,h.neta=Number(o-h.precio).toFixed(4),h.porcentaje=d}return h}function t(o){let c=o.target.id.slice(-1),d=document.getElementById("pre_prom"+c),h=document.getElementById("porcen_prom"+c),A=document.getElementById("precio"+c).textContent.slice(1);A=A.replace(",",""),A=parseFloat(A),A<d.value?(d.classList.add("ring","ring-red-500"),h.classList.add("ring","ring-red-500"),d.title="El precio de promoci\xF3n debe ser menor o igual al precio actual",h.title="El precio de promoci\xF3n debe ser menor o igual al precio actual"):(d.classList.remove("ring","ring-red-500"),h.classList.remove("ring","ring-red-500"),d.title="",h.title="")}function l(o){let d=o.target.closest("button").id.slice(-1),h=document.getElementById("pre_prom"+d),A=document.getElementById("porcen_prom"+d);A.value=0;let L=new InputEvent("input");A.dispatchEvent(L),i(L),h.focus()}const s=async function(){let o=y();if(p(o.cve)){_.value=!0,N.value=!0;return}if(o.cve==""&&o.precio1==""&&o.precio2==""&&o.precio3==""&&o.precio4==""&&o.precio5==""&&(E.value=!0),Object.keys(o).length!==0){a.arts.push(o),r.value=!0,U(),await B(500),r.value=!1;let c=document.getElementById("inputConsultar");c.value="",document.getElementById("desc_art").textContent="",c.focus()}else E.value=!0};function y(){let o={},c=[k.precio_vta0,k.precio_vta1,k.precio_vta2,k.precio_vta3,k.precio_vta4],d=document.getElementsByClassName("pre"),h=!1;for(let ne=0;ne<d.length;ne++)if((d[ne].value!=""||d[ne].value>0)&&parseFloat(c[ne])!=parseFloat(d[ne].value)){h=!0;break}if(!h)return{};let A=k.art.trim(),L=document.getElementById("pre_prom1").value,ie=document.getElementById("pre_prom2").value,_e=document.getElementById("pre_prom3").value,ye=document.getElementById("pre_prom4").value,be=document.getElementById("pre_prom5").value;return o.cve=A,o.precio1=L,o.precio2=ie,o.precio3=_e,o.precio4=ye,o.precio5=be,o.des1=document.getElementById("desc_art").textContent,o}function p(o){for(let c=0;c<a.arts.length;c++)if(a.arts[c].cve==o)return!0;return!1}function B(o){return new Promise(c=>setTimeout(c,o))}function M(){let o=document.getElementById("inputConsultar").getAttribute("cve"),c=Y(o);console.log(a.arts[c]),a.arts[c].precio1=document.getElementById("pre_prom1").value,a.arts[c].precio2=document.getElementById("pre_prom2").value,a.arts[c].precio3=document.getElementById("pre_prom3").value,a.arts[c].precio4=document.getElementById("pre_prom4").value,a.arts[c].precio5=document.getElementById("pre_prom5").value,q()}function Y(o){for(let c=0;c<a.arts.length;c++)if(a.arts[c].cve==o)return c;return-1}function q(){U(),document.getElementById("desc_art").textContent="",document.getElementById("inputConsultar").value="",document.getElementById("btn_edit").classList.add("hidden"),document.getElementById("btn_cancel").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6"&&document.getElementById("btn_add").classList.remove("hidden")}return(o,c)=>(g(),x(K,null,[m(W,{hasFooter:!1,modelValue:$.value,"onUpdate:modelValue":c[0]||(c[0]=d=>$.value=d),blocked:!0,title:"Cargando la informaci\xF3n"},{default:w(()=>[We]),_:1},8,["modelValue"]),m(W,{modelValue:E.value,"onUpdate:modelValue":c[1]||(c[1]=d=>E.value=d),title:"No hubo cambio de Precio",button:"secondary",hasButton:""},{default:w(()=>[et]),_:1},8,["modelValue"]),m(W,{modelValue:P.value,"onUpdate:modelValue":c[2]||(c[2]=d=>P.value=d),title:"Error al capturar el art\xEDculo",hasFooter:!1,titleClass:"mx-auto mb-3",blocked:!0},{default:w(()=>[tt,e("p",null,b(H.value),1)]),_:1},8,["modelValue"]),m(W,{modelValue:_.value,"onUpdate:modelValue":c[3]||(c[3]=d=>_.value=d),title:"Art\xEDculo ya capturado",button:"secondary",hasButton:"",blocked:!0},{default:w(()=>[nt]),_:1},8,["modelValue"]),m(W,{hasFooter:!1,modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=d=>r.value=d),title:"Art\xEDculo agregado",blocked:!0},{default:w(()=>[lt]),_:1},8,["modelValue"]),e("table",null,[e("thead",null,[e("tr",null,[f.checkable?(g(),x("th",ot)):R("",!0),at,st,ct,rt,dt,it])]),e("tbody",ut,[e("tr",null,[f.checkable?(g(),ee(le,{key:0,onChecked:c[5]||(c[5]=d=>o.checked(d,o.client))})):R("",!0),e("td",mt,[e("input",{type:"number",id:"inputConsultar",class:"px-3 py-2 max-w-full focus:ring focus:outline-none border border-gray-700 rounded w-full dark:placeholder-gray-400 bg-transparent text-right ring",onKeyup:[ve(j,["enter"]),G(V,["prevent"])],onKeydown:F},null,40,pt),gt]),_t,yt,e("td",bt,[m(se,{otherClasses:"mb-3",wrapClass:"row"},{default:w(()=>[m(J,{type:"number",icon:I(oe),id:"pre_prom1",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),m(J,{type:"number",icon:I(ae),onKeydown:F,iconSide:"right",id:"porcen_prom1",onKeyup:G(V,["prevent"]),onInput:i,onChange:t,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),ft,e("td",ht,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase1"},null,8,["icon"])]),_:1})])]),e("tr",null,[f.checkable?(g(),ee(le,{key:0,onChecked:c[6]||(c[6]=d=>o.checked(d,o.client))})):R("",!0),vt,Et,e("td",xt,[m(se,{otherClasses:"mb-3",wrapClass:"row"},{default:w(()=>[m(J,{type:"number",icon:I(oe),id:"pre_prom2",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),m(J,{type:"number",icon:I(ae),iconSide:"right",id:"porcen_prom2",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Ct,e("td",Bt,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase2"},null,8,["icon"])]),_:1})])]),e("tr",null,[f.checkable?(g(),ee(le,{key:0,onChecked:c[7]||(c[7]=d=>o.checked(d,o.client))})):R("",!0),It,kt,e("td",null,[m(se,{otherClasses:"mb-3",wrapClass:"row"},{default:w(()=>[m(J,{type:"number",icon:I(oe),id:"pre_prom3",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),m(J,{type:"number",icon:I(ae),iconSide:"right",id:"porcen_prom3",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),wt,e("td",$t,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase3"},null,8,["icon"])]),_:1})])]),e("tr",null,[f.checkable?(g(),ee(le,{key:0,onChecked:c[8]||(c[8]=d=>o.checked(d,o.client))})):R("",!0),At,Pt,e("td",Ft,[m(se,{otherClasses:"mb-3",wrapClass:"row"},{default:w(()=>[m(J,{type:"number",icon:I(oe),id:"pre_prom4",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),m(J,{type:"number",icon:I(ae),id:"porcen_prom4",iconSide:"right",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),St,e("td",Lt,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase4"},null,8,["icon"])]),_:1})])]),e("tr",null,[f.checkable?(g(),ee(le,{key:0,onChecked:c[9]||(c[9]=d=>o.checked(d,o.client))})):R("",!0),Mt,Nt,e("td",null,[m(se,{otherClasses:"mb-3",wrapClass:"row"},{default:w(()=>[m(J,{type:"number",icon:I(oe),id:"pre_prom5",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),m(J,{type:"number",icon:I(ae),iconSide:"right",id:"porcen_prom5",title:"",onKeyup:G(V,["prevent"]),onKeydown:F,onInput:i,onChange:t,otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Vt,e("td",Kt,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase5"},null,8,["icon"])]),_:1})])])])]),m(z,{label:"Agregar Art\xEDculo",id:"btn_add",type:"button",disabled:N.value,color:"info",onClick:s},null,8,["disabled"]),m(z,{label:"Actualizar Precios",id:"btn_edit",type:"button",otherClasses:"hidden mr-4",color:"success",onClick:M}),m(z,{label:"Cancelar",id:"btn_cancel",type:"button",otherClasses:"hidden",color:"danger",onClick:q})],64))}},Dt=e("img",{src:de,alt:"",class:"block mx-auto"},null,-1),jt={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},zt={key:0},Tt=e("th",{class:"text-center"},"Art",-1),Ot=e("th",null,"Descripcion",-1),Rt=e("th",{class:"text-center"},"Precio1",-1),Ht=e("th",{class:"text-center"},"Precio2",-1),Ut=e("th",{class:"text-center"},"Precio3",-1),Zt=e("th",{class:"text-center"},"Precio4",-1),Xt=e("th",{class:"text-center"},"Precio5",-1),qt=e("th",null,null,-1),Yt=["data-label"],Gt=["data-label"],Jt=["data-label"],Qt=["data-label"],Wt=["data-label"],en=["data-label"],tn=["data-label"],nn={class:"before:hidden lg:w-1 whitespace-nowrap"},ln={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},kl={__name:"TableArtCapturados",props:{checkable:Boolean,arts:Array},setup(f){const a=f;ce(),v(!1),v(!1);const u=v(5),r=v(0),E=v([]),_=D(()=>a.arts.slice(u.value*r.value,u.value*(r.value+1))),P=D(()=>Math.ceil(a.arts.length/u.value)),N=D(()=>r.value+1),$=D(()=>{const i=[];for(let n=0;n<P.value;n++)i.push(n);return i});function H(i){let n=j(i);n<0||a.arts.splice(n,1)}function j(i){for(let n=0;n<a.arts.length;n++)if(a.arts[n].cve==i)return n;return-1}const k=v(!1);async function C(i){let t=i.target.closest("td").getAttribute("data-label");console.log("A editar",t);let l=document.getElementById("sucbase").value,s=document.getElementById("prov").value.slice(0,9);k.value=!0,document.getElementById("inputConsultar").setAttribute("cve",t),await V(t,l,s)}const O=v({});function T(){for(let i=1;i<6;i++){let n=document.getElementById("precio"+i);n.textContent="";let t=document.getElementById("pre_prom"+i);t.classList.remove("ring","ring-red-500"),t.value="";let l=document.getElementById("emp"+i);l.textContent="";let s=document.getElementById("porcen_prom"+i);s.classList.remove("ring","ring-red-500"),s.value="",document.getElementById("dif"+i).textContent=""}}async function U(){document.getElementById("btn_add").classList.add("hidden"),document.getElementById("btn_edit").classList.remove("hidden"),document.getElementById("btn_cancel").classList.remove("hidden");let i=document.getElementById("inputConsultar"),n=document.getElementById("pre_prom1"),t=document.getElementById("pre_prom2"),l=document.getElementById("pre_prom3"),s=document.getElementById("pre_prom4"),y=document.getElementById("pre_prom5");i.value=O.value.art.trim(),console.log(a.arts);let p=Q(O.value.art.trim());n.value=parseFloat(p.precio1),t.value=parseFloat(p.precio2),l.value=parseFloat(p.precio3),s.value=parseFloat(p.precio4),y.value=parseFloat(p.precio5)}function Q(i){for(let n=0;n<a.arts.length;n++){const t=a.arts[n];if(t.cve==i)return t}return{}}function S(i){return i.des1?(document.getElementById("desc_art").textContent=i.des1,document.getElementById("emp1").textContent=i.cant_pre0,document.getElementById("emp2").textContent=i.cant_pre1,document.getElementById("emp3").textContent=i.cant_pre2,document.getElementById("emp4").textContent=i.cant_pre3,document.getElementById("emp5").textContent=i.cant_pre4,document.getElementById("precio1").textContent=F(i.precio_vta0),document.getElementById("precio2").textContent=F(i.precio_vta1),document.getElementById("precio3").textContent=F(i.precio_vta2),document.getElementById("precio4").textContent=F(i.precio_vta3),document.getElementById("precio5").textContent=F(i.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function F(i){return i==null||i==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(i)}async function V(i,n,t){let l="";fetch(re+"art?art="+i+"&suc="+n+"&prov="+t+"&emp_cob="+l).then(function(s){k.value=!1,s.ok?(T(),s.json().then(y=>{O.value=y,S(O.value)&&(U(),document.getElementById("pre_prom1").focus())})):(s.json().then(async y=>{document.getElementById("desc_art").textContent=y.message,errorMsg.value=y.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(s){console.log("Hubo un problema con la petici\xF3n Fetch:"+s.message)})}return(i,n)=>(g(),x(K,null,[m(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":n[0]||(n[0]=t=>k.value=t),blocked:!0,title:"Cargando la informaci\xF3n"},{default:w(()=>[Dt]),_:1},8,["modelValue"]),E.value.length?(g(),x("div",jt,[(g(!0),x(K,null,X(E.value,t=>(g(),x("span",{key:t.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},b(t.name),1))),128))])):R("",!0),e("table",null,[e("thead",null,[e("tr",null,[f.checkable?(g(),x("th",zt)):R("",!0),Tt,Ot,Rt,Ht,Ut,Zt,Xt,qt])]),e("tbody",null,[(g(!0),x(K,null,X(I(_),t=>(g(),x("tr",{key:t.cve},[e("td",{"data-label":t.cve,class:"text-center cursor-pointer",onClick:C},b(t.cve),9,Yt),e("td",{"data-label":t.cve,onClick:C,class:"cursor-pointer"},b(t.des1),9,Gt),e("td",{"data-label":t.cve,class:"text-center cursor-pointer",onClick:C},b(F(t.precio1)),9,Jt),e("td",{"data-label":t.cve,class:"text-center cursor-pointer",onClick:C},b(F(t.precio2)),9,Qt),e("td",{"data-label":t.cve,class:"text-center cursor-pointer",onClick:C},b(F(t.precio3)),9,Wt),e("td",{"data-label":t.cve,class:"text-center cursor-pointer",onClick:C},b(F(t.precio4)),9,en),e("td",{"data-label":t.cve,class:"text-center cursor-pointer",onClick:C},b(F(t.precio5)),9,tn),e("td",nn,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"","data-label":t.cve,onClick:l=>H(t.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),e("div",ln,[m(me,null,{default:w(()=>[m(Z,null,{default:w(()=>[(g(!0),x(K,null,X(I($),t=>(g(),ee(z,{key:t,active:t===r.value,label:t+1,color:t===r.value?"lightDark":"whiteDark",small:"",onClick:l=>r.value=t},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"P\xE1gina "+b(I(N))+" de "+b(I(P)),1)]),_:1})])],64))}},on=e("img",{src:de,alt:"",class:"block mx-auto"},null,-1),an={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},sn={key:0},cn=e("th",{class:"text-center"},"Comprando",-1),rn=e("th",{class:"text-center"},"Emp",-1),dn=e("th",{class:"text-center"},"Art",-1),un=e("th",null,"Descripcion",-1),mn=e("th",{class:"text-center"},"Se regalan",-1),pn=e("th",{class:"text-center"},"Emp Reg",-1),gn=e("th",{class:"text-center"},"Art Reg",-1),_n=e("th",{class:""},"Descripcion regalo",-1),yn=e("th",{class:"text-center"},"Fac Min Reg",-1),bn=e("th",null,null,-1),fn=["data-label"],hn=["data-label"],vn=["data-label"],En=["data-label"],xn=["data-label"],Cn=["data-label"],Bn=["data-label"],In=["data-label"],kn=["data-label"],wn={class:"before:hidden lg:w-1 whitespace-nowrap"},$n={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},wl={__name:"TableArtCapturadosRegalo",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(f){const a=f;ue(async()=>{}),ce(),v(!1),v(!1);const u=v(5),r=v(0),E=v([]),_=D(()=>a.arts.slice(u.value*r.value,u.value*(r.value+1))),P=D(()=>Math.ceil(a.arts.length/u.value)),N=D(()=>r.value+1),$=D(()=>{const n=[];for(let t=0;t<P.value;t++)n.push(t);return n});function H(n){let t=j(n);t<0||(a.arts.splice(t,1),O())}function j(n){for(let t=0;t<a.arts.length;t++)if(a.arts[t].cve==n)return t;return-1}const k=v(!1);async function C(n){let l=n.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",l);let s=a.campos,y=U(l),p=a.arts[y];if(s.cobradas=p.cobradas,s.regaladas=p.regaladas,s.fac_min_reg=p.emp_reg,s.fac_min_compra=p.emp_cob,s.fac_min_regalo=p.fac_min_reg,s.cod_reg=p.cod_reg,s.cve=p.cve,document.getElementById("desc_art_cob").value=p.des1,document.getElementById("desc_art_reg").value=p.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let M=document.getElementById("sucbase").value;if(M=="-1"){let q=document.getElementsByClassName("sucursal");for(let o=0;o<q.length;o++)if(q[o].checked){M=q[o].value,console.log(M);break}}let Y=document.getElementById("prov").value.slice(0,9);await i(l,M,Y,p)}function O(){let n=a.campos;n.cobradas=1,n.regaladas=1,n.fac_min_reg="PZA",n.fac_min_compra="PZA",n.fac_min_regalo=1,n.cod_reg="",n.cod_cob="",n.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const T=v({});function U(n){for(let t=0;t<a.arts.length;t++)if(a.arts[t].cve==n)return t;return-1}function Q(n){return n.des1?(document.getElementById("desc_art").textContent=n.des1,document.getElementById("emp1").textContent=n.cant_pre0,document.getElementById("emp2").textContent=n.cant_pre1,document.getElementById("emp3").textContent=n.cant_pre2,document.getElementById("emp4").textContent=n.cant_pre3,document.getElementById("emp5").textContent=n.cant_pre4,document.getElementById("precio1").textContent=S(n.precio_vta0),document.getElementById("precio2").textContent=S(n.precio_vta1),document.getElementById("precio3").textContent=S(n.precio_vta2),document.getElementById("precio4").textContent=S(n.precio_vta3),document.getElementById("precio5").textContent=S(n.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(n){return n==null||n==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(n)}async function F(n){let t=document.getElementById("inputConsultar"),l=document.getElementById("pre_prom1"),s=document.getElementById("pre_prom2"),y=document.getElementById("pre_prom3"),p=document.getElementById("pre_prom4"),B=document.getElementById("pre_prom5");console.log(n),console.log("precio 3",n.precio3,parseFloat(n.precio3)),t.value=n.cve,l.value=n.precio1!=""?parseFloat(n.precio1):null,s.value=n.precio2!=""?parseFloat(n.precio2):null,y.value=n.precio3!=""?parseFloat(n.precio3)+"":null,p.value=n.precio4!=""?parseFloat(n.precio4):null,B.value=n.precio5!=""?parseFloat(n.precio5):null}function V(){for(let n=1;n<6;n++){let t=document.getElementById("precio"+n);t.textContent="";let l=document.getElementById("pre_prom"+n);l.classList.remove("ring","ring-red-500"),l.value="";let s=document.getElementById("emp"+n);s.textContent="";let y=document.getElementById("porcen_prom"+n);y.classList.remove("ring","ring-red-500"),y.value="",document.getElementById("dif"+n).textContent=""}}async function i(n,t,l,s){let y="";fetch(re+"art?art="+n+"&suc="+t+"&prov="+l+"&emp_cob="+y).then(function(p){k.value=!1,p.ok?(V(),p.json().then(B=>{T.value=B,Q(T.value)&&F(s)})):(p.json().then(async B=>{document.getElementById("desc_art").textContent=B.message,errorMsg.value=B.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(p){console.log("Hubo un problema con la petici\xF3n Fetch:"+p.message)})}return(n,t)=>(g(),x(K,null,[m(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=l=>k.value=l),blocked:!0,title:"Cargando la informaci\xF3n"},{default:w(()=>[on]),_:1},8,["modelValue"]),E.value.length?(g(),x("div",an,[(g(!0),x(K,null,X(E.value,l=>(g(),x("span",{key:l.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},b(l.name),1))),128))])):R("",!0),e("table",null,[e("thead",null,[e("tr",null,[f.checkable?(g(),x("th",sn)):R("",!0),cn,rn,dn,un,mn,pn,gn,_n,yn,bn])]),e("tbody",null,[(g(!0),x(K,null,X(I(_),l=>(g(),x("tr",{key:l.cve},[e("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:C},b(parseFloat(l.cobradas)),9,fn),e("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:C},b(l.emp_cob),9,hn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(l.cve),9,vn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer"},b(l.des1),9,En),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(parseFloat(l.regaladas)),9,xn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(l.emp_reg),9,Cn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(l.cod_reg),9,Bn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer"},b(l.desc_reg),9,In),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(parseFloat(l.fac_min_reg)),9,kn),e("td",wn,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"","data-label":l.cve,onClick:s=>H(l.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),e("div",$n,[m(me,null,{default:w(()=>[m(Z,null,{default:w(()=>[(g(!0),x(K,null,X(I($),l=>(g(),ee(z,{key:l,active:l===r.value,label:l+1,color:l===r.value?"lightDark":"whiteDark",small:"",onClick:s=>r.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"P\xE1gina "+b(I(N))+" de "+b(I(P)),1)]),_:1})])],64))}},An=e("img",{src:de,alt:"",class:"block mx-auto"},null,-1),Pn={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},Fn={key:0},Sn=e("th",{class:"text-center"},"Comprando",-1),Ln=e("th",{class:"text-center"},"Emp",-1),Mn=e("th",{class:"text-center"},"Art",-1),Nn=e("th",null,"Descripcion",-1),Vn=e("th",{class:"text-center"},"Precio Art",-1),Kn=e("th",{class:"text-center"},"Precio Especifico",-1),Dn=e("th",null,null,-1),jn=["data-label"],zn=["data-label"],Tn=["data-label"],On=["data-label"],Rn=["data-label"],Hn=["data-label"],Un={class:"before:hidden lg:w-1 whitespace-nowrap"},Zn={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},$l={__name:"TableArtCapturadosCombosPrecioEspecifico",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(f){const a=f;ue(async()=>{console.log(a,"props value")}),ce(),v(!1),v(!1);const u=v(5),r=v(0),E=v([]),_=D(()=>a.arts.slice(u.value*r.value,u.value*(r.value+1))),P=D(()=>Math.ceil(a.arts.length/u.value)),N=D(()=>r.value+1),$=D(()=>{const n=[];for(let t=0;t<P.value;t++)n.push(t);return n});function H(n){let t=j(n);t<0||(a.arts.splice(t,1),O())}function j(n){for(let t=0;t<a.arts.length;t++)if(a.arts[t].cve==n)return t;return-1}const k=v(!1);async function C(n){let l=n.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",l);let s=a.campos,y=U(l),p=a.arts[y];if(s.cobradas=p.cobradas,s.regaladas=p.regaladas,s.fac_min_reg=p.emp_reg,s.fac_min_compra=p.emp_cob,s.fac_min_regalo=p.fac_min_reg,s.cod_reg=p.cod_reg,s.cve=p.cve,document.getElementById("desc_art_cob").value=p.des1,document.getElementById("desc_art_reg").value=p.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let M=document.getElementById("sucbase").value;if(M=="-1"){let q=document.getElementsByClassName("sucursal");for(let o=0;o<q.length;o++)if(q[o].checked){M=q[o].value,console.log(M);break}}let Y=document.getElementById("prov").value.slice(0,9);await i(l,M,Y,p)}function O(){let n=a.campos;n.cobradas=1,n.regaladas=1,n.fac_min_reg="PZA",n.fac_min_compra="PZA",n.fac_min_regalo=1,n.cod_reg="",n.cod_cob="",n.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const T=v({});function U(n){for(let t=0;t<a.arts.length;t++)if(a.arts[t].cve==n)return t;return-1}function Q(n){return n.des1?(document.getElementById("desc_art").textContent=n.des1,document.getElementById("emp1").textContent=n.cant_pre0,document.getElementById("emp2").textContent=n.cant_pre1,document.getElementById("emp3").textContent=n.cant_pre2,document.getElementById("emp4").textContent=n.cant_pre3,document.getElementById("emp5").textContent=n.cant_pre4,document.getElementById("precio1").textContent=S(n.precio_vta0),document.getElementById("precio2").textContent=S(n.precio_vta1),document.getElementById("precio3").textContent=S(n.precio_vta2),document.getElementById("precio4").textContent=S(n.precio_vta3),document.getElementById("precio5").textContent=S(n.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(n){return n==null||n==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(n)}async function F(n){let t=document.getElementById("inputConsultar"),l=document.getElementById("pre_prom1"),s=document.getElementById("pre_prom2"),y=document.getElementById("pre_prom3"),p=document.getElementById("pre_prom4"),B=document.getElementById("pre_prom5");console.log(n),console.log("precio 3",n.precio3,parseFloat(n.precio3)),t.value=n.cve,l.value=n.precio1!=""?parseFloat(n.precio1):null,s.value=n.precio2!=""?parseFloat(n.precio2):null,y.value=n.precio3!=""?parseFloat(n.precio3)+"":null,p.value=n.precio4!=""?parseFloat(n.precio4):null,B.value=n.precio5!=""?parseFloat(n.precio5):null}function V(){for(let n=1;n<6;n++){let t=document.getElementById("precio"+n);t.textContent="";let l=document.getElementById("pre_prom"+n);l.classList.remove("ring","ring-red-500"),l.value="";let s=document.getElementById("emp"+n);s.textContent="";let y=document.getElementById("porcen_prom"+n);y.classList.remove("ring","ring-red-500"),y.value="",document.getElementById("dif"+n).textContent=""}}async function i(n,t,l,s){let y="";fetch(re+"art?art="+n+"&suc="+t+"&prov="+l+"&emp_cob="+y).then(function(p){k.value=!1,p.ok?(V(),p.json().then(B=>{T.value=B,Q(T.value)&&F(s)})):(p.json().then(async B=>{document.getElementById("desc_art").textContent=B.message,errorMsg.value=B.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(p){console.log("Hubo un problema con la petici\xF3n Fetch:"+p.message)})}return(n,t)=>(g(),x(K,null,[m(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=l=>k.value=l),blocked:!0,title:"Cargando la informaci\xF3n"},{default:w(()=>[An]),_:1},8,["modelValue"]),E.value.length?(g(),x("div",Pn,[(g(!0),x(K,null,X(E.value,l=>(g(),x("span",{key:l.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},b(l.name),1))),128))])):R("",!0),e("table",null,[e("thead",null,[e("tr",null,[f.checkable?(g(),x("th",Fn)):R("",!0),Sn,Ln,Mn,Nn,Vn,Kn,Dn])]),e("tbody",null,[(g(!0),x(K,null,X(I(_),l=>(g(),x("tr",{key:l.cve},[e("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:C},b(parseFloat(l.cobradas)),9,jn),e("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:C},b(l.emp_cob),9,zn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(l.cve),9,Tn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer"},b(l.des1),9,On),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(l.desc_reg),9,Rn),e("td",{"data-label":l.cve,onClick:C,class:"cursor-pointer text-center"},b(parseFloat(l.regaladas).toFixed(2)),9,Hn),e("td",Un,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"","data-label":l.cve,onClick:s=>H(l.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),e("div",Zn,[m(me,null,{default:w(()=>[m(Z,null,{default:w(()=>[(g(!0),x(K,null,X(I($),l=>(g(),ee(z,{key:l,active:l===r.value,label:l+1,color:l===r.value?"lightDark":"whiteDark",small:"",onClick:s=>r.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"P\xE1gina "+b(I(N))+" de "+b(I(P)),1)]),_:1})])],64))}},Xn=e("img",{src:de,alt:"",class:"block mx-auto"},null,-1),qn={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},Yn={key:0},Gn=e("th",{class:"text-center"},"Comprando",-1),Jn=e("th",{class:"text-center"},"Emp",-1),Qn=e("th",{class:"text-center"},"Art",-1),Wn=e("th",null,"Descripcion",-1),el=e("th",{class:"text-center"},"Precio Art",-1),tl=e("th",{class:"text-center"},"Precio Combo",-1),nl=e("th",null,null,-1),ll=["data-label"],ol=["data-label"],al=["data-label"],sl=["data-label"],cl=["data-label"],rl=["data-label"],dl={class:"before:hidden lg:w-1 whitespace-nowrap"},il=e("td",null,null,-1),ul=e("td",null,null,-1),ml=e("td",null,null,-1),pl=e("td",null,null,-1),gl=e("td",{class:"text-center"},b("Total del Combo:"),-1),_l={id:"totalCombo",class:"text-center"},yl={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Al={__name:"TableArtCapturadosCombosPrecioEspecificoVarios",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(f){const a=f;ue(async()=>{console.log(a.arts,"props value"),n(a.arts)}),ce(),v(!1),v(!1);const u=v(5),r=v(0),E=v([]),_=D(()=>a.arts.slice(u.value*r.value,u.value*(r.value+1))),P=D(()=>Math.ceil(a.arts.length/u.value)),N=D(()=>r.value+1),$=D(()=>{const t=[];for(let l=0;l<P.value;l++)t.push(l);return t});function H(t){let l=j(t);l<0||(a.arts.splice(l,1),O())}function j(t){for(let l=0;l<a.arts.length;l++)if(a.arts[l].cve==t)return l;return-1}const k=v(!1);async function C(t){let s=t.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",s);let y=a.campos,p=U(s),B=a.arts[p];if(y.cobradas=B.cobradas,y.regaladas=B.regaladas,y.fac_min_reg=B.emp_reg,y.fac_min_compra=B.emp_cob,y.fac_min_regalo=B.fac_min_reg,y.cod_reg=B.cod_reg,y.cve=B.cve,document.getElementById("desc_art_cob").value=B.des1,document.getElementById("desc_art_reg").value=B.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let Y=document.getElementById("sucbase").value;if(Y=="-1"){let o=document.getElementsByClassName("sucursal");for(let c=0;c<o.length;c++)if(o[c].checked){Y=o[c].value,console.log(Y);break}}let q=document.getElementById("prov").value.slice(0,9);await i(s,Y,q,B)}function O(){let t=a.campos;t.cobradas=1,t.regaladas=1,t.fac_min_reg="PZA",t.fac_min_compra="PZA",t.fac_min_regalo=1,t.cod_reg="",t.cod_cob="",t.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const T=v({});function U(t){for(let l=0;l<a.arts.length;l++)if(a.arts[l].cve==t)return l;return-1}function Q(t){return t.des1?(document.getElementById("desc_art").textContent=t.des1,document.getElementById("emp1").textContent=t.cant_pre0,document.getElementById("emp2").textContent=t.cant_pre1,document.getElementById("emp3").textContent=t.cant_pre2,document.getElementById("emp4").textContent=t.cant_pre3,document.getElementById("emp5").textContent=t.cant_pre4,document.getElementById("precio1").textContent=S(t.precio_vta0),document.getElementById("precio2").textContent=S(t.precio_vta1),document.getElementById("precio3").textContent=S(t.precio_vta2),document.getElementById("precio4").textContent=S(t.precio_vta3),document.getElementById("precio5").textContent=S(t.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(t){return t==null||t==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(t)}async function F(t){let l=document.getElementById("inputConsultar"),s=document.getElementById("pre_prom1"),y=document.getElementById("pre_prom2"),p=document.getElementById("pre_prom3"),B=document.getElementById("pre_prom4"),M=document.getElementById("pre_prom5");l.value=t.cve,s.value=t.precio1!=""?parseFloat(t.precio1):null,y.value=t.precio2!=""?parseFloat(t.precio2):null,p.value=t.precio3!=""?parseFloat(t.precio3)+"":null,B.value=t.precio4!=""?parseFloat(t.precio4):null,M.value=t.precio5!=""?parseFloat(t.precio5):null,console.log("formatea el precio ")}function V(){for(let t=1;t<6;t++){let l=document.getElementById("precio"+t);l.textContent="";let s=document.getElementById("pre_prom"+t);s.classList.remove("ring","ring-red-500"),s.value="";let y=document.getElementById("emp"+t);y.textContent="";let p=document.getElementById("porcen_prom"+t);p.classList.remove("ring","ring-red-500"),p.value="",document.getElementById("dif"+t).textContent=""}}async function i(t,l,s,y){let p="";fetch(re+"art?art="+t+"&suc="+l+"&prov="+s+"&emp_cob="+p).then(function(B){k.value=!1,B.ok?(V(),B.json().then(M=>{T.value=M,Q(T.value)&&F(y)})):(B.json().then(async M=>{document.getElementById("desc_art").textContent=M.message,errorMsg.value=M.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(B){console.log("Hubo un problema con la petici\xF3n Fetch:"+B.message)})}function n(t){let l=0;for(let y=0;y<t.length;y++)l+=t[y].cobradas*t[y].precio1;let s=document.getElementById("totalCombo");s.innerText="$"+l.toFixed(2)}return(t,l)=>(g(),x(K,null,[m(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=s=>k.value=s),blocked:!0,title:"Cargando la informaci\xF3n"},{default:w(()=>[Xn]),_:1},8,["modelValue"]),E.value.length?(g(),x("div",qn,[(g(!0),x(K,null,X(E.value,s=>(g(),x("span",{key:s.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},b(s.name),1))),128))])):R("",!0),e("table",null,[e("thead",null,[e("tr",null,[f.checkable?(g(),x("th",Yn)):R("",!0),Gn,Jn,Qn,Wn,el,tl,nl])]),e("tbody",null,[(g(!0),x(K,null,X(I(_),s=>(g(),x("tr",{key:s.cve},[e("td",{id:"canArt","data-label":s.cve,class:"text-center cursor-pointer",onClick:C},b(parseFloat(s.cobradas)),9,ll),e("td",{"data-label":s.cve,class:"text-center cursor-pointer",onClick:C},b(s.emp_cob),9,ol),e("td",{"data-label":s.cve,onClick:C,class:"cursor-pointer text-center"},b(s.cve),9,al),e("td",{"data-label":s.cve,onClick:C,class:"cursor-pointer"},b(s.des1),9,sl),e("td",{"data-label":s.cve,onClick:C,class:"cursor-pointer text-center"},b(s.desc_reg),9,cl),e("td",{id:"preNuevo","data-label":s.cve,onClick:C,class:"cursor-pointer text-center"},b(parseFloat(s.regaladas)),9,rl),e("td",dl,[m(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:w(()=>[m(z,{color:"danger",icon:I(te),small:"","data-label":s.cve,onClick:y=>H(s.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128)),e("tr",null,[il,ul,ml,pl,gl,e("td",_l,b("$ 0.00"),1)])])]),e("div",yl,[m(me,null,{default:w(()=>[m(Z,null,{default:w(()=>[(g(!0),x(K,null,X(I($),s=>(g(),ee(z,{key:s,active:s===r.value,label:s+1,color:s===r.value?"lightDark":"whiteDark",small:"",onClick:y=>r.value=s},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"P\xE1gina "+b(I(N))+" de "+b(I(P)),1)]),_:1})])],64))}},bl=["id"],Pl={__name:"Accordion",props:{label:{type:String,default:null},labelFor:{type:String,default:null},help:{type:String,default:null},otherClasses:{type:String,default:null},id:{type:String,default:null}},setup(f){const a=f;Ee();const u=D(()=>["panel px-2 border-gray-700 border-t-0"]);D(()=>[" last:mb-0",a.otherClasses?a.otherClasses:""]);function r(E){E.target.classList.toggle("active");var _=E.target.nextElementSibling;_.style.maxHeight?(_.style.maxHeight=null,_.classList.remove("border-solid","rounded-b","border-2","pt-3","pb-4"),E.target.classList.remove("font-bold")):(_.classList.add("border-solid","rounded-b","border-2","pt-3","pb-4"),E.target.classList.add("font-bold"),_.style.maxHeight=_.scrollHeight+40+"px")}return(E,_)=>(g(),x(K,null,[f.label?(g(),x("button",{key:0,id:f.id,class:"block accordion hover:bg-blue-600 dark:hover:bg-blue-500 border-solid border-gray-700 rounded bg-gray dark:bg-slate-800 border-2 p-3",onClick:r},b(f.label),9,bl)):R("",!0),e("div",{class:Ce(I(u))},[xe(E.$slots,"default")],2)],64))}};export{Cl as R,Pl as _,Bl as a,Il as b,kl as c,wl as d,$l as e,Al as f,Ie as g};
