import{_ as ge,aj as fe,b as E,ak as pe,o as u,c as _,g,K as X,a as t,C as f,F as D,l as T,al as he,e as ue,d as ce,v as j,w as $,h as W,D as M,f as ee,am as le,ah as ve,j as G,m as I,an as oe,ao as ae,ap as te,k as Z,t as re,T as me,B as xe,A as Ee,n as Ce}from"./index.8f0f0867.js";import{_ as de}from"./loading.16b03cf4.js";import{_ as Be}from"./checked.4cad9791.js";import{_ as se}from"./FormField.24559b15.js";import{_ as J}from"./FormControl.4cfbfc0d.js";const Ie=""+new URL("../img/cancelar.png",import.meta.url).href,ke={components:{LitepieDatepicker:fe},props:["idDate"],setup(){const h=E([]),a=E({date:"DD MMM YYYY",month:"MMM"});return{dateValue:h,formatter:a,customShortcuts:()=>[{label:"Este mes",atClick:()=>{const r=new Date;return[new Date(r.getFullYear(),r.getMonth(),1),new Date(r.getFullYear(),r.getMonth()+1,0)]}},{label:"Los siguientes 15 d\xEDas",atClick:()=>{const r=new Date;return[r,new Date(r.getFullYear(),r.getMonth(),r.getDate()+15)]}}]}}},$e={class:"flex"};function we(h,a,p,r,C,y){const P=pe("litepie-datepicker");return u(),_("div",$e,[g(P,{i18n:"es",modelValue:r.dateValue,"onUpdate:modelValue":a[0]||(a[0]=V=>r.dateValue=V),id:p.idDate,formatter:r.formatter,shortcuts:r.customShortcuts,placeholder:"Vigencia de la promoci\xF3n"},null,8,["modelValue","id","formatter","shortcuts"])])}const wl=ge(ke,[["render",we]]),Ae=["id","aria-describedby","value","zona"],Pe=["for","id"],Fe={__name:"SucursalCheckBox",setup(h){E("Parent");const a=E(["001","002","003","004","005","006","007","008","009","011","012","013","014","015","016","017","018","020","021","022","023","024","031","032","033","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","055","056","057","058","059","060","061","063","065","066","067","068","070","071","072","075","077","080"]);function p(r){switch(r){case"001":case"002":case"003":case"004":case"005":case"006":case"007":case"008":case"009":case"011":case"014":case"017":case"018":case"020":case"021":case"022":case"031":case"032":case"037":case"040":case"041":case"042":case"043":case"044":case"045":case"047":case"048":case"050":case"051":case"052":case"055":case"056":case"057":case"058":case"059":case"060":case"063":case"065":case"066":case"067":case"070":case"071":case"072":case"075":case"077":case"080":return 1;case"012":case"013":case"035":case"049":case"053":case"061":return 2;case"015":case"016":case"023":case"024":case"033":case"036":case"038":case"039":case"046":case"068":return 3;default:return 1}}return(r,C)=>(u(!0),_(D,null,X(a.value,y=>(u(),_("div",{key:y,class:"flex items-start items-center inline-flex mr-3 w-16"},[t("input",{id:"suc_"+y,"aria-describedby":"suc_"+y,type:"checkbox",value:y,class:"bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h1 my-1 w-4 rounded cursor-pointer py-2 disabled:opacity-50 disabled:cursor-not-allowed sucursal",zona:p(y)},null,8,Ae),t("label",{for:"suc_"+y,id:"txt_"+y,class:"text-sm py-2 pl-3 font-medium cursor-pointer"},f(y),9,Pe)]))),128))}},Se={props:{sucBase:{type:String,default:"1"}},components:{Sucursales:Fe,BaseButton:T},name:"Regiones",setup(h){return{dateValue:E([])}},methods:{seleccionarSucursales(h){let a=document.getElementById("tipo").value;switch(h.target.value){case"VALLES":if(this.marcarZona(1),a==2||a==3||a==4){let p=document.getElementById("suc_001"),r=document.getElementById("txt_001");p.style.opacity="0.5",r.style.opacity="0.5",p.disabled=!0,p.checked=!1;let C=document.getElementById("suc_002"),y=document.getElementById("txt_002");C.style.opacity="0.5",y.style.opacity="0.5",C.disabled=!0,C.checked=!1;let P=document.getElementById("suc_037"),V=document.getElementById("txt_037");P.style.opacity="0.5",V.style.opacity="0.5",P.disabled=!0,P.checked=!1;let w=document.getElementById("suc_051"),H=document.getElementById("txt_051");w.style.opacity="0.5",H.style.opacity="0.5",w.disabled=!0,w.checked=!1;let z=document.getElementById("suc_057"),k=document.getElementById("txt_057");z.style.opacity="0.5",k.style.opacity="0.5",z.disabled=!0,z.checked=!1}break;case"COSTA":if(this.marcarZona(2),a==2||a==3||a==4){let p=document.getElementById("suc_013"),r=document.getElementById("txt_013");p.style.opacity="0.5",r.style.opacity="0.5",p.disabled=!0,p.checked=!1;let C=document.getElementById("suc_053"),y=document.getElementById("txt_053");C.style.opacity="0.5",y.style.opacity="0.5",C.disabled=!0,C.checked=!1}break;case"ISTMO":if(this.marcarZona(3),a==2||a==3||a==4){let p=document.getElementById("suc_024"),r=document.getElementById("txt_024");p.style.opacity="0.5",r.style.opacity="0.5",p.disabled=!0,p.checked=!1}break;case"TODAS":this.marcarZona(4),(a==2||a==3||a==4)&&this.quitasuc();break;default:this.desactivarSucursales(!0),(a==2||a==3||a==4)&&this.quitasuc();break}},desmarcarSucursales(h){document.querySelectorAll("[zona]").forEach(p=>{p.checked=h})},desactivarSucursales(h){let a=document.querySelectorAll("[zona]");h?a.forEach(p=>{p.removeAttribute("disabled"),p.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),p.nextElementSibling.classList.add("cursor-pointer")}):a.forEach(p=>{p.setAttribute("disabled",!0),p.nextElementSibling.classList.remove("cursor-pointer"),p.nextElementSibling.classList.add("opacity-50","cursor-not-allowed")})},marcarZona(h=1){if(this.desmarcarSucursales(!1),this.desactivarSucursales(!1),h==4){document.querySelectorAll("[zona]").forEach(r=>{r.removeAttribute("disabled"),r.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),r.nextElementSibling.classList.add("cursor-pointer"),r.checked=!0});return}document.querySelectorAll('[zona="'+h+'"]').forEach(p=>{p.removeAttribute("disabled"),p.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),p.nextElementSibling.classList.add("cursor-pointer"),p.checked=!0})},personalizado(){this.desactivarSucursales(!1)},limpiar(){this.desmarcarSucursales(!1),this.desactivarSucursales(!0),document.getElementById("zona-custom").checked=!0},quitasuc(){let h=document.getElementById("suc_001"),a=document.getElementById("txt_001");h.style.opacity="0.5",a.style.opacity="0.5",h.disabled=!0,h.checked=!1;let p=document.getElementById("suc_002"),r=document.getElementById("txt_002");p.style.opacity="0.5",r.style.opacity="0.5",p.disabled=!0,p.checked=!1;let C=document.getElementById("suc_013"),y=document.getElementById("txt_013");C.style.opacity="0.5",y.style.opacity="0.5",C.disabled=!0,C.checked=!1;let P=document.getElementById("suc_024"),V=document.getElementById("txt_024");P.style.opacity="0.5",V.style.opacity="0.5",P.disabled=!0,P.checked=!1;let w=document.getElementById("suc_037"),H=document.getElementById("txt_037");w.style.opacity="0.5",H.style.opacity="0.5",w.disabled=!0,w.checked=!1;let z=document.getElementById("suc_051"),k=document.getElementById("txt_051");z.style.opacity="0.5",k.style.opacity="0.5",z.disabled=!0,z.checked=!1;let v=document.getElementById("suc_053"),R=document.getElementById("txt_053");v.style.opacity="0.5",R.style.opacity="0.5",v.disabled=!0,v.checked=!1;let O=document.getElementById("suc_057"),U=document.getElementById("txt_057");O.style.opacity="0.5",U.style.opacity="0.5",O.disabled=!0,O.checked=!1}}};document.querySelectorAll("[zona]");const Le={class:"grid grid-flow-col grid-rows-1"},Me={class:"mx-5"},Ne={class:"max-w-lg mx-auto"},Ve={class:"mb-1"},Ke=t("legend",{class:"sr-only"}," Regiones ",-1),De=t("div",{class:"mb-3"},[t("h3",null,[t("b",null,"Regiones:")])],-1),je={class:"flex items-center mb-3 pl-2"},ze=t("label",{for:"zona-valles",class:"text-sm font-medium pl-2 block"}," Valles ",-1),Te={class:"flex items-center mb-3 pl-2"},Oe=t("label",{for:"zona-costa",class:"text-sm font-medium pl-2 block"}," Costa ",-1),Re={class:"flex items-center mb-3 pl-2"},He=t("label",{for:"zona-istmo",class:"text-sm font-medium pl-2 block"}," Istmo ",-1),Ue={class:"flex items-center mb-3 pl-2"},Ze=t("label",{for:"zona-todas",class:"text-sm font-medium pl-2 block"}," Todas ",-1),Xe={class:"flex items-center mb-1 pl-2"},qe=t("label",{for:"zona-custom",class:"text-sm font-medium pl-2 block"}," Personalizado ",-1),Ye=he('<div class="max-w-lg mx-auto"><fieldset class=""><legend class="sr-only">Aplica para:</legend><div class="mt-2 mb-3"><h3><b>Aplica para:</b></h3></div><div class="flex items-start items-center mb-3 pl-2"><input id="mostrador" aria-describedby="checkbox-3" type="checkbox" name="mostrador" value="1" checked class="bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded"><label id="txtmost" for="mostrador" class="text-sm pl-3 font-medium"> Mostrador </label></div><div class="flex items-start items-center mb-3 pl-2"><input id="retail" aria-describedby="checkbox-2" type="checkbox" name="retail" value="1" class="bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded"><label for="retail" class="text-sm pl-3 font-medium"> Retail </label></div></fieldset></div>',1),Ge={class:"flex justify-center"},Je={class:"px-5 mx-5 flex flex-wrap py-12",style:{height:"fit-content",margin:"auto"}};function Qe(h,a,p,r,C,y){const P=pe("BaseButton"),V=pe("Sucursales");return u(),_("div",Le,[t("div",Me,[t("div",Ne,[t("fieldset",Ve,[Ke,De,t("div",je,[t("input",{id:"zona-valles",type:"radio",name:"zona",value:"VALLES",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-valles","aria-describedby":"zona-valles",onChange:a[0]||(a[0]=(...w)=>y.seleccionarSucursales&&y.seleccionarSucursales(...w))},null,32),ze]),t("div",Te,[t("input",{id:"zona-costa",type:"radio",name:"zona",value:"COSTA",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-costa","aria-describedby":"zona-costa",onChange:a[1]||(a[1]=(...w)=>y.seleccionarSucursales&&y.seleccionarSucursales(...w))},null,32),Oe]),t("div",Re,[t("input",{id:"zona-istmo",type:"radio",name:"zona",value:"ISTMO",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-istmo","aria-describedby":"zona-istmo",onChange:a[2]||(a[2]=(...w)=>y.seleccionarSucursales&&y.seleccionarSucursales(...w))},null,32),He]),t("div",Ue,[t("input",{id:"zona-todas",type:"radio",name:"zona",value:"TODAS",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-todas","aria-describedby":"zona-todas",onChange:a[3]||(a[3]=(...w)=>y.seleccionarSucursales&&y.seleccionarSucursales(...w))},null,32),Ze]),t("div",Xe,[t("input",{id:"zona-custom",type:"radio",name:"zona",value:"CUSTOM",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-custom","aria-describedby":"zona-custom",onChange:a[4]||(a[4]=(...w)=>y.seleccionarSucursales&&y.seleccionarSucursales(...w)),checked:""},null,32),qe]),g(P,{label:"Limpiar",id:"btn_clean_suc",otherClasses:"w-full mt-3",type:"button",small:!0,color:"info",onClick:y.limpiar},null,8,["onClick"])])]),Ye]),t("div",Ge,[t("div",Je,[g(V)])])])}const Al=ge(Se,[["render",Qe]]),We=t("img",{src:de,alt:"",class:"block mx-auto"},null,-1),et=t("p",null,"Favor de capturar un precio diferente a los actuales",-1),tt=t("img",{src:Ie,alt:"",class:"block mx-auto"},null,-1),nt=t("p",null,"Favor de capturar uno diferente o eliminar el existente",-1),lt=t("img",{src:Be,alt:"",class:"block mx-auto"},null,-1),ot={key:0},at=t("th",null,"C\xF3digo",-1),st=t("th",null,"Emp",-1),ct=t("th",null,"Precio Actual",-1),rt=t("th",null,"Precio Oferta",-1),dt=t("th",null,"Diferencia",-1),it=t("th",null,null,-1),ut={class:"rounded"},mt={class:"w-48 align-top",rowspan:"5"},pt=["onKeyup"],gt=t("p",{class:"mt-3",id:"desc_art"},null,-1),_t=t("td",{class:"w-8 text-center",id:"emp1"}," 1 ",-1),yt=t("td",{class:"text-right px-5",id:"precio1"},null,-1),bt={class:"w-1/3"},ft=t("td",{class:"text-right px-5",id:"dif1"},null,-1),ht={class:"before:hidden lg:w-1 whitespace-nowrap"},vt=t("td",{class:"w-8 text-center",id:"emp2"}," 1 ",-1),xt=t("td",{id:"precio2",class:"text-right px-5"},null,-1),Et={"data-label":"pre_prm2"},Ct=t("td",{class:"text-right px-5",id:"dif2"},null,-1),Bt={class:"before:hidden lg:w-1 whitespace-nowrap"},It=t("td",{class:"w-8 text-center",id:"emp3"}," 1 ",-1),kt=t("td",{id:"precio3",class:"text-right px-5"},null,-1),$t=t("td",{class:"text-right px-5",id:"dif3"},null,-1),wt={class:"before:hidden lg:w-1 whitespace-nowrap"},At=t("td",{class:"w-8 text-center",id:"emp4"}," 1 ",-1),Pt=t("td",{id:"precio4",class:"text-right px-5"},null,-1),Ft={"data-label":"pre_prm2"},St=t("td",{class:"text-right px-5",id:"dif4"},null,-1),Lt={class:"before:hidden lg:w-1 whitespace-nowrap"},Mt=t("td",{class:"w-8 text-center",id:"emp5"}," 1 ",-1),Nt=t("td",{id:"precio5",class:"text-right px-5"},null,-1),Vt=t("td",{class:"text-right px-5",id:"dif5"},null,-1),Kt={class:"before:hidden lg:w-1 whitespace-nowrap"},Pl={__name:"PreciosArticulosTable",props:{checkable:Boolean,arts:Array},setup(h){const a=h;ue(()=>{document.getElementsByClassName("pre"),document.getElementsByClassName("per")});const p=ce();j(()=>p.clients),E(!1);const r=E(!1),C=E(!1),y=E(!1),P=E(!1),V=E(!0),w=E(!1),H=E("");async function z(o){let c=document.getElementById("sucbase").value,d=document.querySelectorAll(".sucursal");var x=0;for(let L=0;L<d.length;L++)d[L].checked&&x++;if(console.log(x),x==1){for(let L=0;L<d.length;L++)if(d[L].checked){c=d[L].value;break}}else c=document.getElementById("sucbase").value;let A=document.getElementById("prov").value.slice(0,9);await v(o.target.value,c,A)}var k={};async function v(o,c,d){let x="otro";w.value=!0,fetch(re+"art?art="+o+"&suc="+c+"&prov="+d+"&emp_cob="+x).then(function(A){w.value=!1,A.ok?(U(),A.json().then(L=>{k=L;let ie=Q(k);ie&&(document.getElementById("pre_prom1").focus(),document.getElementsByName("tipo")[0].value!="6"?V.value=!1:R()),O(ie)})):(A.json().then(async L=>{console.log(L),document.getElementById("desc_art").textContent=L.message,H.value=L.message,P.value=!0,await B(1500),P.value=!1,document.getElementsByName("tipo")[0].value=="6"&&R(-1)}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(A){console.log("Hubo un problema con la petici\xF3n Fetch:"+A.message)})}function R(o=0){if(o==-1){document.getElementById("cod_cob").value=null,document.getElementById("desc_art_cob").value=null;return}document.getElementById("cod_cob").value=k.art,document.getElementById("desc_art_cob").value=k.des1}function O(o){let c=document.getElementsByClassName("per"),d=document.getElementsByClassName("pre");[].forEach.call(c,x=>{o?x.removeAttribute("disabled"):x.setAttribute("disabled",!0),x.value=""}),[].forEach.call(d,x=>{o?x.removeAttribute("disabled"):x.setAttribute("disabled",!0),x.value=""})}function U(){for(let o=1;o<6;o++){let c=document.getElementById("precio"+o);c.textContent="";let d=document.getElementById("pre_prom"+o);d.classList.remove("ring","ring-red-500"),d.value="";let x=document.getElementById("emp"+o);x.textContent="";let A=document.getElementById("porcen_prom"+o);A.classList.remove("ring","ring-red-500"),A.value="",document.getElementById("dif"+o).textContent=""}}function Q(o){return o.des1?(document.getElementById("desc_art").textContent=o.des1,document.getElementById("emp1").textContent=o.cant_pre0,document.getElementById("emp2").textContent=o.cant_pre1,document.getElementById("emp3").textContent=o.cant_pre2,document.getElementById("emp4").textContent=o.cant_pre3,document.getElementById("emp5").textContent=o.cant_pre4,document.getElementById("precio1").textContent=S(o.precio_vta0),document.getElementById("precio2").textContent=S(o.precio_vta1),document.getElementById("precio3").textContent=S(o.precio_vta2),document.getElementById("precio4").textContent=S(o.precio_vta3),document.getElementById("precio5").textContent=S(o.precio_vta4),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(o){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(o)}const F=function(o){var c=["-","+","e","ArrowDown","ArrowUp"];c.includes(o.key)&&o.preventDefault()},K=function(o){if(o.key=="Enter"||o.key=="ArrowDown"){let c=o.target.id,d=parseInt(c.slice(-1));if(d<5){d++;let x=c.slice(0,-1)+d;document.getElementById(x).focus();return}d==5&&document.getElementById("btn_add").focus()}if(o.key=="ArrowUp"){let c=o.target.id,d=parseInt(c.slice(-1));if(d>1){d--;let x=c.slice(0,-1)+d;document.getElementById(x).focus()}else d==1&&document.getElementById("inputConsultar").focus()}},m=function(o){let c=o.target.id.slice(-1),d=document.getElementById("pre_prom"+c),x=document.getElementById("porcen_prom"+c),A=document.getElementById("precio"+c).textContent.slice(1);A=A.replace(",",""),A=parseFloat(A);let L={};o.target==d?(L=n(A,d.value,""),x.value=L.porcentaje):(L=n(A,"",x.value),d.value=L.precio),document.getElementById("dif"+c).textContent=S(L.neta)};function n(o,c,d){let x={};if(c!="")x.precio=c,x.neta=Number((o-c).toFixed(4)).toFixed(4),x.porcentaje=Number((100-c*100/o).toFixed(4)).toFixed(4);else{let A=Number(o.toFixed(4)-(o*d/100).toFixed(4)).toFixed(4);x.precio=A,x.neta=Number(o-x.precio).toFixed(4),x.porcentaje=d}return x}function e(o){let c=o.target.id.slice(-1),d=document.getElementById("pre_prom"+c),x=document.getElementById("porcen_prom"+c),A=document.getElementById("precio"+c).textContent.slice(1);A=A.replace(",",""),A=parseFloat(A),A<d.value?(d.classList.add("ring","ring-red-500"),x.classList.add("ring","ring-red-500"),d.title="El precio de promoci\xF3n debe ser menor o igual al precio actual",x.title="El precio de promoci\xF3n debe ser menor o igual al precio actual"):(d.classList.remove("ring","ring-red-500"),x.classList.remove("ring","ring-red-500"),d.title="",x.title="")}function l(o){let d=o.target.closest("button").id.slice(-1),x=document.getElementById("pre_prom"+d),A=document.getElementById("porcen_prom"+d);A.value=0;let L=new InputEvent("input");A.dispatchEvent(L),m(L),x.focus()}const s=async function(){let o=b();if(i(o.cve)){y.value=!0,V.value=!0;return}if(o.cve==""&&o.precio1==""&&o.precio2==""&&o.precio3==""&&o.precio4==""&&o.precio5==""&&(C.value=!0),Object.keys(o).length!==0){a.arts.push(o),r.value=!0,U(),await B(500),r.value=!1;let c=document.getElementById("inputConsultar");c.value="",document.getElementById("desc_art").textContent="",c.focus()}else C.value=!0};function b(){let o={},c=[k.precio_vta0,k.precio_vta1,k.precio_vta2,k.precio_vta3,k.precio_vta4],d=document.getElementsByClassName("pre"),x=!1;for(let ne=0;ne<d.length;ne++)if((d[ne].value!=""||d[ne].value>0)&&parseFloat(c[ne])!=parseFloat(d[ne].value)){x=!0;break}if(!x)return{};let A=k.art.trim(),L=document.getElementById("pre_prom1").value,ie=document.getElementById("pre_prom2").value,_e=document.getElementById("pre_prom3").value,ye=document.getElementById("pre_prom4").value,be=document.getElementById("pre_prom5").value;return o.cve=A,o.precio1=L,o.precio2=ie,o.precio3=_e,o.precio4=ye,o.precio5=be,o.des1=document.getElementById("desc_art").textContent,o}function i(o){for(let c=0;c<a.arts.length;c++)if(a.arts[c].cve==o)return!0;return!1}function B(o){return new Promise(c=>setTimeout(c,o))}function N(){let o=document.getElementById("inputConsultar").getAttribute("cve"),c=Y(o);console.log(a.arts[c]),a.arts[c].precio1=document.getElementById("pre_prom1").value,a.arts[c].precio2=document.getElementById("pre_prom2").value,a.arts[c].precio3=document.getElementById("pre_prom3").value,a.arts[c].precio4=document.getElementById("pre_prom4").value,a.arts[c].precio5=document.getElementById("pre_prom5").value,q()}function Y(o){for(let c=0;c<a.arts.length;c++)if(a.arts[c].cve==o)return c;return-1}function q(){U(),document.getElementById("desc_art").textContent="",document.getElementById("inputConsultar").value="",document.getElementById("btn_edit").classList.add("hidden"),document.getElementById("btn_cancel").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6"&&document.getElementById("btn_add").classList.remove("hidden")}return(o,c)=>(u(),_(D,null,[g(W,{hasFooter:!1,modelValue:w.value,"onUpdate:modelValue":c[0]||(c[0]=d=>w.value=d),blocked:!0,title:"Cargando la informaci\xF3n"},{default:$(()=>[We]),_:1},8,["modelValue"]),g(W,{modelValue:C.value,"onUpdate:modelValue":c[1]||(c[1]=d=>C.value=d),title:"No hubo cambio de Precio",button:"secondary",hasButton:""},{default:$(()=>[et]),_:1},8,["modelValue"]),g(W,{modelValue:P.value,"onUpdate:modelValue":c[2]||(c[2]=d=>P.value=d),title:"Error al capturar el art\xEDculo",hasFooter:!1,titleClass:"mx-auto mb-3",blocked:!0},{default:$(()=>[tt,t("p",null,f(H.value),1)]),_:1},8,["modelValue"]),g(W,{modelValue:y.value,"onUpdate:modelValue":c[3]||(c[3]=d=>y.value=d),title:"Art\xEDculo ya capturado",button:"secondary",hasButton:"",blocked:!0},{default:$(()=>[nt]),_:1},8,["modelValue"]),g(W,{hasFooter:!1,modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=d=>r.value=d),title:"Art\xEDculo agregado",blocked:!0},{default:$(()=>[lt]),_:1},8,["modelValue"]),t("table",null,[t("thead",null,[t("tr",null,[h.checkable?(u(),_("th",ot)):M("",!0),at,st,ct,rt,dt,it])]),t("tbody",ut,[t("tr",null,[h.checkable?(u(),ee(le,{key:0,onChecked:c[5]||(c[5]=d=>o.checked(d,o.client))})):M("",!0),t("td",mt,[t("input",{type:"number",id:"inputConsultar",class:"px-3 py-2 max-w-full focus:ring focus:outline-none border border-gray-700 rounded w-full dark:placeholder-gray-400 bg-transparent text-right ring",onKeyup:[ve(z,["enter"]),G(K,["prevent"])],onKeydown:F},null,40,pt),gt]),_t,yt,t("td",bt,[g(se,{otherClasses:"mb-3",wrapClass:"row"},{default:$(()=>[g(J,{type:"number",icon:I(oe),id:"pre_prom1",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),g(J,{type:"number",icon:I(ae),onKeydown:F,iconSide:"right",id:"porcen_prom1",onKeyup:G(K,["prevent"]),onInput:m,onChange:e,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),ft,t("td",ht,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase1"},null,8,["icon"])]),_:1})])]),t("tr",null,[h.checkable?(u(),ee(le,{key:0,onChecked:c[6]||(c[6]=d=>o.checked(d,o.client))})):M("",!0),vt,xt,t("td",Et,[g(se,{otherClasses:"mb-3",wrapClass:"row"},{default:$(()=>[g(J,{type:"number",icon:I(oe),id:"pre_prom2",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),g(J,{type:"number",icon:I(ae),iconSide:"right",id:"porcen_prom2",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Ct,t("td",Bt,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase2"},null,8,["icon"])]),_:1})])]),t("tr",null,[h.checkable?(u(),ee(le,{key:0,onChecked:c[7]||(c[7]=d=>o.checked(d,o.client))})):M("",!0),It,kt,t("td",null,[g(se,{otherClasses:"mb-3",wrapClass:"row"},{default:$(()=>[g(J,{type:"number",icon:I(oe),id:"pre_prom3",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),g(J,{type:"number",icon:I(ae),iconSide:"right",id:"porcen_prom3",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),$t,t("td",wt,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase3"},null,8,["icon"])]),_:1})])]),t("tr",null,[h.checkable?(u(),ee(le,{key:0,onChecked:c[8]||(c[8]=d=>o.checked(d,o.client))})):M("",!0),At,Pt,t("td",Ft,[g(se,{otherClasses:"mb-3",wrapClass:"row"},{default:$(()=>[g(J,{type:"number",icon:I(oe),id:"pre_prom4",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),g(J,{type:"number",icon:I(ae),id:"porcen_prom4",iconSide:"right",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),St,t("td",Lt,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase4"},null,8,["icon"])]),_:1})])]),t("tr",null,[h.checkable?(u(),ee(le,{key:0,onChecked:c[9]||(c[9]=d=>o.checked(d,o.client))})):M("",!0),Mt,Nt,t("td",null,[g(se,{otherClasses:"mb-3",wrapClass:"row"},{default:$(()=>[g(J,{type:"number",icon:I(oe),id:"pre_prom5",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),g(J,{type:"number",icon:I(ae),iconSide:"right",id:"porcen_prom5",title:"",onKeyup:G(K,["prevent"]),onKeydown:F,onInput:m,onChange:e,otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Vt,t("td",Kt,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"",onClick:l,id:"btn_erase5"},null,8,["icon"])]),_:1})])])])]),g(T,{label:"Agregar Art\xEDculo",id:"btn_add",type:"button",disabled:V.value,color:"info",onClick:s},null,8,["disabled"]),g(T,{label:"Actualizar Precios",id:"btn_edit",type:"button",otherClasses:"hidden mr-4",color:"success",onClick:N}),g(T,{label:"Cancelar",id:"btn_cancel",type:"button",otherClasses:"hidden",color:"danger",onClick:q})],64))}},Dt=t("img",{src:de,alt:"",class:"block mx-auto"},null,-1),jt={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},zt={key:0},Tt=t("th",{class:"text-center"},"Art",-1),Ot=t("th",null,"Descripcion",-1),Rt=t("th",{class:"text-center"},"Precio1",-1),Ht=t("th",{class:"text-center"},"Precio2",-1),Ut=t("th",{class:"text-center"},"Precio3",-1),Zt=t("th",{class:"text-center"},"Precio4",-1),Xt=t("th",{class:"text-center"},"Precio5",-1),qt=t("th",null,null,-1),Yt=["data-label"],Gt=["data-label"],Jt=["data-label"],Qt=["data-label"],Wt=["data-label"],en=["data-label"],tn=["data-label"],nn=["data-label"],ln=["data-label"],on=["data-label"],an=["data-label"],sn=["data-label"],cn={class:"before:hidden lg:w-1 whitespace-nowrap"},rn={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Fl={__name:"TableArtCapturados",props:{checkable:Boolean,arts:Array},setup(h){const a=h;ce(),E(!1),E(!1);const p=E(5),r=E(0),C=E([]),y=j(()=>a.arts.slice(p.value*r.value,p.value*(r.value+1))),P=j(()=>Math.ceil(a.arts.length/p.value)),V=j(()=>r.value+1),w=j(()=>{const m=[];for(let n=0;n<P.value;n++)m.push(n);return m});function H(m){let n=z(m);n<0||a.arts.splice(n,1)}function z(m){for(let n=0;n<a.arts.length;n++)if(a.arts[n].cve==m)return n;return-1}const k=E(!1);async function v(m){let e=m.target.closest("td").getAttribute("data-label");console.log("A editar",e);let l=document.getElementById("sucbase").value,s=document.getElementById("prov").value.slice(0,9);k.value=!0,document.getElementById("inputConsultar").setAttribute("cve",e),await K(e,l,s)}const R=E({});function O(){for(let m=1;m<6;m++){let n=document.getElementById("precio"+m);n.textContent="";let e=document.getElementById("pre_prom"+m);e.classList.remove("ring","ring-red-500"),e.value="";let l=document.getElementById("emp"+m);l.textContent="";let s=document.getElementById("porcen_prom"+m);s.classList.remove("ring","ring-red-500"),s.value="",document.getElementById("dif"+m).textContent=""}}async function U(){document.getElementById("btn_add").classList.add("hidden"),document.getElementById("btn_edit").classList.remove("hidden"),document.getElementById("btn_cancel").classList.remove("hidden");let m=document.getElementById("inputConsultar"),n=document.getElementById("pre_prom1"),e=document.getElementById("pre_prom2"),l=document.getElementById("pre_prom3"),s=document.getElementById("pre_prom4"),b=document.getElementById("pre_prom5");m.value=R.value.art.trim(),console.log(a.arts);let i=Q(R.value.art.trim());i.precio1!=0&&(n.value=parseFloat(i.precio1)),i.precio2!=0&&(e.value=parseFloat(i.precio2)),i.precio3!=0&&(l.value=parseFloat(i.precio3)),i.precio4!=0&&(s.value=parseFloat(i.precio4)),i.precio5!=0&&(b.value=parseFloat(i.precio5))}function Q(m){for(let n=0;n<a.arts.length;n++){const e=a.arts[n];if(e.cve==m)return e}return{}}function S(m){return m.des1?(document.getElementById("desc_art").textContent=m.des1,document.getElementById("emp1").textContent=m.cant_pre0,document.getElementById("emp2").textContent=m.cant_pre1,document.getElementById("emp3").textContent=m.cant_pre2,document.getElementById("emp4").textContent=m.cant_pre3,document.getElementById("emp5").textContent=m.cant_pre4,document.getElementById("precio1").textContent=F(m.precio_vta0),document.getElementById("precio2").textContent=F(m.precio_vta1),document.getElementById("precio3").textContent=F(m.precio_vta2),document.getElementById("precio4").textContent=F(m.precio_vta3),document.getElementById("precio5").textContent=F(m.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function F(m){return m==null||m==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(m)}async function K(m,n,e){let l="";fetch(re+"art?art="+m+"&suc="+n+"&prov="+e+"&emp_cob="+l).then(function(s){k.value=!1,s.ok?(O(),s.json().then(b=>{R.value=b,S(R.value)&&(U(),document.getElementById("pre_prom1").focus())})):(s.json().then(async b=>{document.getElementById("desc_art").textContent=b.message,errorMsg.value=b.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(s){console.log("Hubo un problema con la petici\xF3n Fetch:"+s.message)})}return(m,n)=>(u(),_(D,null,[g(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":n[0]||(n[0]=e=>k.value=e),blocked:!0,title:"Cargando la informaci\xF3n"},{default:$(()=>[Dt]),_:1},8,["modelValue"]),C.value.length?(u(),_("div",jt,[(u(!0),_(D,null,X(C.value,e=>(u(),_("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},f(e.name),1))),128))])):M("",!0),t("table",null,[t("thead",null,[t("tr",null,[h.checkable?(u(),_("th",zt)):M("",!0),Tt,Ot,Rt,Ht,Ut,Zt,Xt,qt])]),t("tbody",null,[(u(!0),_(D,null,X(I(y),e=>(u(),_("tr",{key:e.cve},[t("td",{"data-label":e.cve,class:"text-center cursor-pointer",onClick:v},f(e.cve),9,Yt),t("td",{"data-label":e.cve,onClick:v,class:"cursor-pointer"},f(e.des1),9,Gt),e.precio1==0?(u(),_("td",{key:0,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v}," ------ ",8,Jt)):M("",!0),e.precio1!=0?(u(),_("td",{key:1,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v},f(F(e.precio1)),9,Qt)):M("",!0),e.precio2==0?(u(),_("td",{key:2,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v}," ------ ",8,Wt)):M("",!0),e.precio2!=0?(u(),_("td",{key:3,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v},f(F(e.precio2)),9,en)):M("",!0),e.precio3==0?(u(),_("td",{key:4,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v}," ------ ",8,tn)):M("",!0),e.precio3!=0?(u(),_("td",{key:5,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v},f(F(e.precio3)),9,nn)):M("",!0),e.precio4==0?(u(),_("td",{key:6,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v}," ------ ",8,ln)):M("",!0),e.precio4!=0?(u(),_("td",{key:7,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v},f(F(e.precio4)),9,on)):M("",!0),e.precio5==0?(u(),_("td",{key:8,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v}," ------ ",8,an)):M("",!0),e.precio5!=0?(u(),_("td",{key:9,"data-label":e.cve,class:"text-center cursor-pointer",onClick:v},f(F(e.precio5)),9,sn)):M("",!0),t("td",cn,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"","data-label":e.cve,onClick:l=>H(e.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),t("div",rn,[g(me,null,{default:$(()=>[g(Z,null,{default:$(()=>[(u(!0),_(D,null,X(I(w),e=>(u(),ee(T,{key:e,active:e===r.value,label:e+1,color:e===r.value?"lightDark":"whiteDark",small:"",onClick:l=>r.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"P\xE1gina "+f(I(V))+" de "+f(I(P)),1)]),_:1})])],64))}},dn=t("img",{src:de,alt:"",class:"block mx-auto"},null,-1),un={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},mn={key:0},pn=t("th",{class:"text-center"},"Comprando",-1),gn=t("th",{class:"text-center"},"Emp",-1),_n=t("th",{class:"text-center"},"Art",-1),yn=t("th",null,"Descripcion",-1),bn=t("th",{class:"text-center"},"Se regalan",-1),fn=t("th",{class:"text-center"},"Emp Reg",-1),hn=t("th",{class:"text-center"},"Art Reg",-1),vn=t("th",{class:""},"Descripcion regalo",-1),xn=t("th",{class:"text-center"},"Fac Min Reg",-1),En=t("th",null,null,-1),Cn=["data-label"],Bn=["data-label"],In=["data-label"],kn=["data-label"],$n=["data-label"],wn=["data-label"],An=["data-label"],Pn=["data-label"],Fn=["data-label"],Sn={class:"before:hidden lg:w-1 whitespace-nowrap"},Ln={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Sl={__name:"TableArtCapturadosRegalo",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(h){const a=h;ue(async()=>{}),ce(),E(!1),E(!1);const p=E(5),r=E(0),C=E([]),y=j(()=>a.arts.slice(p.value*r.value,p.value*(r.value+1))),P=j(()=>Math.ceil(a.arts.length/p.value)),V=j(()=>r.value+1),w=j(()=>{const n=[];for(let e=0;e<P.value;e++)n.push(e);return n});function H(n){let e=z(n);e<0||(a.arts.splice(e,1),R())}function z(n){for(let e=0;e<a.arts.length;e++)if(a.arts[e].cve==n)return e;return-1}const k=E(!1);async function v(n){let l=n.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",l);let s=a.campos,b=U(l),i=a.arts[b];if(s.cobradas=i.cobradas,s.regaladas=i.regaladas,s.fac_min_reg=1,s.fac_min_compra=i.emp_cob,s.fac_min_regalo=i.fac_min_reg,s.cod_reg=i.cod_reg,s.cve=i.cve,document.getElementById("desc_art_cob").value=i.des1,document.getElementById("desc_art_reg").value=i.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let N=document.getElementById("sucbase").value;if(N=="-1"){let q=document.getElementsByClassName("sucursal");for(let o=0;o<q.length;o++)if(q[o].checked){N=q[o].value,console.log(N);break}}let Y=document.getElementById("prov").value.slice(0,9);await m(l,N,Y,i)}function R(){let n=a.campos;n.cobradas=1,n.regaladas=1,n.fac_min_reg="PZA",n.fac_min_compra="PZA",n.fac_min_regalo=1,n.cod_reg="",n.cod_cob="",n.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const O=E({});function U(n){for(let e=0;e<a.arts.length;e++)if(a.arts[e].cve==n)return e;return-1}function Q(n){return n.des1?(document.getElementById("desc_art").textContent=n.des1,document.getElementById("emp1").textContent=n.cant_pre0,document.getElementById("emp2").textContent=n.cant_pre1,document.getElementById("emp3").textContent=n.cant_pre2,document.getElementById("emp4").textContent=n.cant_pre3,document.getElementById("emp5").textContent=n.cant_pre4,document.getElementById("precio1").textContent=S(n.precio_vta0),document.getElementById("precio2").textContent=S(n.precio_vta1),document.getElementById("precio3").textContent=S(n.precio_vta2),document.getElementById("precio4").textContent=S(n.precio_vta3),document.getElementById("precio5").textContent=S(n.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(n){return n==null||n==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(n)}async function F(n){let e=document.getElementById("inputConsultar"),l=document.getElementById("pre_prom1"),s=document.getElementById("pre_prom2"),b=document.getElementById("pre_prom3"),i=document.getElementById("pre_prom4"),B=document.getElementById("pre_prom5");console.log(n),console.log("precio 3",n.precio3,parseFloat(n.precio3)),e.value=n.cve,l.value=n.precio1!=""?parseFloat(n.precio1):null,s.value=n.precio2!=""?parseFloat(n.precio2):null,b.value=n.precio3!=""?parseFloat(n.precio3)+"":null,i.value=n.precio4!=""?parseFloat(n.precio4):null,B.value=n.precio5!=""?parseFloat(n.precio5):null}function K(){for(let n=1;n<6;n++){let e=document.getElementById("precio"+n);e.textContent="";let l=document.getElementById("pre_prom"+n);l.classList.remove("ring","ring-red-500"),l.value="";let s=document.getElementById("emp"+n);s.textContent="";let b=document.getElementById("porcen_prom"+n);b.classList.remove("ring","ring-red-500"),b.value="",document.getElementById("dif"+n).textContent=""}}async function m(n,e,l,s){let b="";fetch(re+"art?art="+n+"&suc="+e+"&prov="+l+"&emp_cob="+b).then(function(i){k.value=!1,i.ok?(K(),i.json().then(B=>{O.value=B,Q(O.value)&&F(s)})):(i.json().then(async B=>{document.getElementById("desc_art").textContent=B.message,errorMsg.value=B.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(i){console.log("Hubo un problema con la petici\xF3n Fetch:"+i.message)})}return(n,e)=>(u(),_(D,null,[g(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),blocked:!0,title:"Cargando la informaci\xF3n"},{default:$(()=>[dn]),_:1},8,["modelValue"]),C.value.length?(u(),_("div",un,[(u(!0),_(D,null,X(C.value,l=>(u(),_("span",{key:l.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},f(l.name),1))),128))])):M("",!0),t("table",null,[t("thead",null,[t("tr",null,[h.checkable?(u(),_("th",mn)):M("",!0),pn,gn,_n,yn,bn,fn,hn,vn,xn,En])]),t("tbody",null,[(u(!0),_(D,null,X(I(y),l=>(u(),_("tr",{key:l.cve},[t("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:v},f(parseFloat(l.cobradas)),9,Cn),t("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:v},f(l.emp_cob),9,Bn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(l.cve),9,In),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer"},f(l.des1),9,kn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(parseFloat(l.regaladas)),9,$n),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(l.emp_reg),9,wn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(l.cod_reg),9,An),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer"},f(l.desc_reg),9,Pn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(parseFloat(l.fac_min_reg)),9,Fn),t("td",Sn,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"","data-label":l.cve,onClick:s=>H(l.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),t("div",Ln,[g(me,null,{default:$(()=>[g(Z,null,{default:$(()=>[(u(!0),_(D,null,X(I(w),l=>(u(),ee(T,{key:l,active:l===r.value,label:l+1,color:l===r.value?"lightDark":"whiteDark",small:"",onClick:s=>r.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"P\xE1gina "+f(I(V))+" de "+f(I(P)),1)]),_:1})])],64))}},Mn=t("img",{src:de,alt:"",class:"block mx-auto"},null,-1),Nn={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},Vn={key:0},Kn=t("th",{class:"text-center"},"Comprando",-1),Dn=t("th",{class:"text-center"},"Emp",-1),jn=t("th",{class:"text-center"},"Art",-1),zn=t("th",null,"Descripcion",-1),Tn=t("th",{class:"text-center"},"Precio Art",-1),On=t("th",{class:"text-center"},"Precio Especifico",-1),Rn=t("th",null,null,-1),Hn=["data-label"],Un=["data-label"],Zn=["data-label"],Xn=["data-label"],qn=["data-label"],Yn=["data-label"],Gn={class:"before:hidden lg:w-1 whitespace-nowrap"},Jn={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ll={__name:"TableArtCapturadosCombosPrecioEspecifico",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(h){const a=h;ue(async()=>{console.log(a,"props value")}),ce(),E(!1),E(!1);const p=E(5),r=E(0),C=E([]),y=j(()=>a.arts.slice(p.value*r.value,p.value*(r.value+1))),P=j(()=>Math.ceil(a.arts.length/p.value)),V=j(()=>r.value+1),w=j(()=>{const n=[];for(let e=0;e<P.value;e++)n.push(e);return n});function H(n){let e=z(n);e<0||(a.arts.splice(e,1),R())}function z(n){for(let e=0;e<a.arts.length;e++)if(a.arts[e].cve==n)return e;return-1}const k=E(!1);async function v(n){let l=n.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",l);let s=a.campos,b=U(l),i=a.arts[b];if(s.cobradas=i.cobradas,s.regaladas=i.regaladas,s.fac_min_reg=i.emp_reg,s.fac_min_compra=i.emp_cob,s.fac_min_regalo=i.fac_min_reg,s.cod_reg=i.cod_reg,s.cve=i.cve,document.getElementById("desc_art_cob").value=i.des1,document.getElementById("desc_art_reg").value=i.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let N=document.getElementById("sucbase").value;if(N=="-1"){let q=document.getElementsByClassName("sucursal");for(let o=0;o<q.length;o++)if(q[o].checked){N=q[o].value,console.log(N);break}}let Y=document.getElementById("prov").value.slice(0,9);await m(l,N,Y,i)}function R(){let n=a.campos;n.cobradas=1,n.regaladas=1,n.fac_min_reg="PZA",n.fac_min_compra="PZA",n.fac_min_regalo=1,n.cod_reg="",n.cod_cob="",n.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const O=E({});function U(n){for(let e=0;e<a.arts.length;e++)if(a.arts[e].cve==n)return e;return-1}function Q(n){return n.des1?(document.getElementById("desc_art").textContent=n.des1,document.getElementById("emp1").textContent=n.cant_pre0,document.getElementById("emp2").textContent=n.cant_pre1,document.getElementById("emp3").textContent=n.cant_pre2,document.getElementById("emp4").textContent=n.cant_pre3,document.getElementById("emp5").textContent=n.cant_pre4,document.getElementById("precio1").textContent=S(n.precio_vta0),document.getElementById("precio2").textContent=S(n.precio_vta1),document.getElementById("precio3").textContent=S(n.precio_vta2),document.getElementById("precio4").textContent=S(n.precio_vta3),document.getElementById("precio5").textContent=S(n.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(n){return n==null||n==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(n)}async function F(n){let e=document.getElementById("inputConsultar"),l=document.getElementById("pre_prom1"),s=document.getElementById("pre_prom2"),b=document.getElementById("pre_prom3"),i=document.getElementById("pre_prom4"),B=document.getElementById("pre_prom5");console.log(n),console.log("precio 3",n.precio3,parseFloat(n.precio3)),e.value=n.cve,l.value=n.precio1!=""?parseFloat(n.precio1):null,s.value=n.precio2!=""?parseFloat(n.precio2):null,b.value=n.precio3!=""?parseFloat(n.precio3)+"":null,i.value=n.precio4!=""?parseFloat(n.precio4):null,B.value=n.precio5!=""?parseFloat(n.precio5):null}function K(){for(let n=1;n<6;n++){let e=document.getElementById("precio"+n);e.textContent="";let l=document.getElementById("pre_prom"+n);l.classList.remove("ring","ring-red-500"),l.value="";let s=document.getElementById("emp"+n);s.textContent="";let b=document.getElementById("porcen_prom"+n);b.classList.remove("ring","ring-red-500"),b.value="",document.getElementById("dif"+n).textContent=""}}async function m(n,e,l,s){let b="";fetch(re+"art?art="+n+"&suc="+e+"&prov="+l+"&emp_cob="+b).then(function(i){k.value=!1,i.ok?(K(),i.json().then(B=>{O.value=B,Q(O.value)&&F(s)})):(i.json().then(async B=>{document.getElementById("desc_art").textContent=B.message,errorMsg.value=B.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(i){console.log("Hubo un problema con la petici\xF3n Fetch:"+i.message)})}return(n,e)=>(u(),_(D,null,[g(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),blocked:!0,title:"Cargando la informaci\xF3n"},{default:$(()=>[Mn]),_:1},8,["modelValue"]),C.value.length?(u(),_("div",Nn,[(u(!0),_(D,null,X(C.value,l=>(u(),_("span",{key:l.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},f(l.name),1))),128))])):M("",!0),t("table",null,[t("thead",null,[t("tr",null,[h.checkable?(u(),_("th",Vn)):M("",!0),Kn,Dn,jn,zn,Tn,On,Rn])]),t("tbody",null,[(u(!0),_(D,null,X(I(y),l=>(u(),_("tr",{key:l.cve},[t("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:v},f(parseFloat(l.cobradas)),9,Hn),t("td",{"data-label":l.cve,class:"text-center cursor-pointer",onClick:v},f(l.emp_cob),9,Un),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(l.cve),9,Zn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer"},f(l.des1),9,Xn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(l.desc_reg),9,qn),t("td",{"data-label":l.cve,onClick:v,class:"cursor-pointer text-center"},f(parseFloat(l.regaladas).toFixed(2)),9,Yn),t("td",Gn,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"","data-label":l.cve,onClick:s=>H(l.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),t("div",Jn,[g(me,null,{default:$(()=>[g(Z,null,{default:$(()=>[(u(!0),_(D,null,X(I(w),l=>(u(),ee(T,{key:l,active:l===r.value,label:l+1,color:l===r.value?"lightDark":"whiteDark",small:"",onClick:s=>r.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"P\xE1gina "+f(I(V))+" de "+f(I(P)),1)]),_:1})])],64))}},Qn=t("img",{src:de,alt:"",class:"block mx-auto"},null,-1),Wn={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},el={key:0},tl=t("th",{class:"text-center"},"Comprando",-1),nl=t("th",{class:"text-center"},"Emp",-1),ll=t("th",{class:"text-center"},"Art",-1),ol=t("th",null,"Descripcion",-1),al=t("th",{class:"text-center"},"Precio Art",-1),sl=t("th",{class:"text-center"},"Precio Combo",-1),cl=t("th",null,null,-1),rl=["data-label"],dl=["data-label"],il=["data-label"],ul=["data-label"],ml=["data-label"],pl=["data-label"],gl={class:"before:hidden lg:w-1 whitespace-nowrap"},_l=t("td",null,null,-1),yl=t("td",null,null,-1),bl=t("td",null,null,-1),fl=t("td",null,null,-1),hl=t("td",{class:"text-center"},f("Total del Combo:"),-1),vl={id:"totalCombo",class:"text-center"},xl={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ml={__name:"TableArtCapturadosCombosPrecioEspecificoVarios",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(h){const a=h;ue(async()=>{console.log(a.arts,"props value"),n(a.arts)}),ce(),E(!1),E(!1);const p=E(5),r=E(0),C=E([]),y=j(()=>a.arts.slice(p.value*r.value,p.value*(r.value+1))),P=j(()=>Math.ceil(a.arts.length/p.value)),V=j(()=>r.value+1),w=j(()=>{const e=[];for(let l=0;l<P.value;l++)e.push(l);return e});function H(e){let l=z(e);l<0||(a.arts.splice(l,1),R())}function z(e){for(let l=0;l<a.arts.length;l++)if(a.arts[l].cve==e)return l;return-1}const k=E(!1);async function v(e){let s=e.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",s);let b=a.campos,i=U(s),B=a.arts[i];if(b.cobradas=B.cobradas,b.regaladas=B.regaladas,b.fac_min_reg=B.emp_reg,b.fac_min_compra=B.emp_cob,b.fac_min_regalo=B.fac_min_reg,b.cod_reg=B.cod_reg,b.cve=B.cve,document.getElementById("desc_art_cob").value=B.des1,document.getElementById("desc_art_reg").value=B.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let Y=document.getElementById("sucbase").value;if(Y=="-1"){let o=document.getElementsByClassName("sucursal");for(let c=0;c<o.length;c++)if(o[c].checked){Y=o[c].value,console.log(Y);break}}let q=document.getElementById("prov").value.slice(0,9);await m(s,Y,q,B)}function R(){let e=a.campos;e.cobradas=1,e.regaladas=1,e.fac_min_reg="PZA",e.fac_min_compra="PZA",e.fac_min_regalo=1,e.cod_reg="",e.cod_cob="",e.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const O=E({});function U(e){for(let l=0;l<a.arts.length;l++)if(a.arts[l].cve==e)return l;return-1}function Q(e){return e.des1?(document.getElementById("desc_art").textContent=e.des1,document.getElementById("emp1").textContent=e.cant_pre0,document.getElementById("emp2").textContent=e.cant_pre1,document.getElementById("emp3").textContent=e.cant_pre2,document.getElementById("emp4").textContent=e.cant_pre3,document.getElementById("emp5").textContent=e.cant_pre4,document.getElementById("precio1").textContent=S(e.precio_vta0),document.getElementById("precio2").textContent=S(e.precio_vta1),document.getElementById("precio3").textContent=S(e.precio_vta2),document.getElementById("precio4").textContent=S(e.precio_vta3),document.getElementById("precio5").textContent=S(e.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function S(e){return e==null||e==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(e)}async function F(e){let l=document.getElementById("inputConsultar"),s=document.getElementById("pre_prom1"),b=document.getElementById("pre_prom2"),i=document.getElementById("pre_prom3"),B=document.getElementById("pre_prom4"),N=document.getElementById("pre_prom5");l.value=e.cve,s.value=e.precio1!=""?parseFloat(e.precio1):null,b.value=e.precio2!=""?parseFloat(e.precio2):null,i.value=e.precio3!=""?parseFloat(e.precio3)+"":null,B.value=e.precio4!=""?parseFloat(e.precio4):null,N.value=e.precio5!=""?parseFloat(e.precio5):null,console.log("formatea el precio ")}function K(){for(let e=1;e<6;e++){let l=document.getElementById("precio"+e);l.textContent="";let s=document.getElementById("pre_prom"+e);s.classList.remove("ring","ring-red-500"),s.value="";let b=document.getElementById("emp"+e);b.textContent="";let i=document.getElementById("porcen_prom"+e);i.classList.remove("ring","ring-red-500"),i.value="",document.getElementById("dif"+e).textContent=""}}async function m(e,l,s,b){let i="";fetch(re+"art?art="+e+"&suc="+l+"&prov="+s+"&emp_cob="+i).then(function(B){k.value=!1,B.ok?(K(),B.json().then(N=>{O.value=N,Q(O.value)&&F(b)})):(B.json().then(async N=>{document.getElementById("desc_art").textContent=N.message,errorMsg.value=N.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(B){console.log("Hubo un problema con la petici\xF3n Fetch:"+B.message)})}function n(e){let l=0;for(let b=0;b<e.length;b++)l+=e[b].cobradas*e[b].precio1;let s=document.getElementById("totalCombo");s.innerText="$"+l.toFixed(2)}return(e,l)=>(u(),_(D,null,[g(W,{hasFooter:!1,modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=s=>k.value=s),blocked:!0,title:"Cargando la informaci\xF3n"},{default:$(()=>[Qn]),_:1},8,["modelValue"]),C.value.length?(u(),_("div",Wn,[(u(!0),_(D,null,X(C.value,s=>(u(),_("span",{key:s.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},f(s.name),1))),128))])):M("",!0),t("table",null,[t("thead",null,[t("tr",null,[h.checkable?(u(),_("th",el)):M("",!0),tl,nl,ll,ol,al,sl,cl])]),t("tbody",null,[(u(!0),_(D,null,X(I(y),s=>(u(),_("tr",{key:s.cve},[t("td",{id:"canArt","data-label":s.cve,class:"text-center cursor-pointer",onClick:v},f(parseFloat(s.cobradas)),9,rl),t("td",{"data-label":s.cve,class:"text-center cursor-pointer",onClick:v},f(s.emp_cob),9,dl),t("td",{"data-label":s.cve,onClick:v,class:"cursor-pointer text-center"},f(s.cve),9,il),t("td",{"data-label":s.cve,onClick:v,class:"cursor-pointer"},f(s.des1),9,ul),t("td",{"data-label":s.cve,onClick:v,class:"cursor-pointer text-center"},f(s.desc_reg),9,ml),t("td",{id:"preNuevo","data-label":s.cve,onClick:v,class:"cursor-pointer text-center"},f(parseFloat(s.regaladas)),9,pl),t("td",gl,[g(Z,{type:"justify-start lg:justify-end","no-wrap":""},{default:$(()=>[g(T,{color:"danger",icon:I(te),small:"","data-label":s.cve,onClick:b=>H(s.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128)),t("tr",null,[_l,yl,bl,fl,hl,t("td",vl,f("$ 0.00"),1)])])]),t("div",xl,[g(me,null,{default:$(()=>[g(Z,null,{default:$(()=>[(u(!0),_(D,null,X(I(w),s=>(u(),ee(T,{key:s,active:s===r.value,label:s+1,color:s===r.value?"lightDark":"whiteDark",small:"",onClick:b=>r.value=s},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"P\xE1gina "+f(I(V))+" de "+f(I(P)),1)]),_:1})])],64))}},El=["id"],Nl={__name:"Accordion",props:{label:{type:String,default:null},labelFor:{type:String,default:null},help:{type:String,default:null},otherClasses:{type:String,default:null},id:{type:String,default:null}},setup(h){const a=h;xe();const p=j(()=>["panel px-2 border-gray-700 border-t-0"]);j(()=>[" last:mb-0",a.otherClasses?a.otherClasses:""]);function r(C){C.target.classList.toggle("active");var y=C.target.nextElementSibling;y.style.maxHeight?(y.style.maxHeight=null,y.classList.remove("border-solid","rounded-b","border-2","pt-3","pb-4"),C.target.classList.remove("font-bold")):(y.classList.add("border-solid","rounded-b","border-2","pt-3","pb-4"),C.target.classList.add("font-bold"),y.style.maxHeight=y.scrollHeight+40+"px")}return(C,y)=>(u(),_(D,null,[h.label?(u(),_("button",{key:0,id:h.id,class:"block accordion hover:bg-blue-600 dark:hover:bg-blue-500 border-solid border-gray-700 rounded bg-gray dark:bg-slate-800 border-2 p-3",onClick:r},f(h.label),9,El)):M("",!0),t("div",{class:Ce(I(p))},[Ee(C.$slots,"default")],2)],64))}};export{wl as R,Nl as _,Al as a,Pl as b,Fl as c,Sl as d,Ll as e,Ml as f,Ie as g};
