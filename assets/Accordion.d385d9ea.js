import{_ as me,ai as ye,b as h,aj as ce,o as _,c as B,g as i,K as X,a as e,C as x,F as D,l as K,ak as he,e as pe,d as ie,v as N,w as I,h as q,D as z,f as Z,al as ne,am as ve,j as M,m as v,an as oe,ao as le,ap as Y,k as R,t as de,T as ge,B as Ce,A as xe,n as Ee}from"./index.74708cfc.js";import{_ as ue}from"./loading.16b03cf4.js";import{_ as Be}from"./checked.4cad9791.js";import{_ as ae}from"./FormField.63451e13.js";import{_ as T}from"./FormControl.314fc145.js";const Ie=""+new URL("../img/cancelar.png",import.meta.url).href,ke={components:{LitepieDatepicker:ye},props:["idDate"],setup(){const p=h([]),s=h({date:"DD MMM YYYY",month:"MMM"});return{dateValue:p,formatter:s,customShortcuts:()=>[{label:"Este mes",atClick:()=>{const d=new Date;return[new Date(d.getFullYear(),d.getMonth(),1),new Date(d.getFullYear(),d.getMonth()+1,0)]}},{label:"Los siguientes 15 d\xEDas",atClick:()=>{const d=new Date;return[d,new Date(d.getFullYear(),d.getMonth(),d.getDate()+15)]}}]}}},we={class:"flex"};function $e(p,s,g,d,k,m){const F=ce("litepie-datepicker");return _(),B("div",we,[i(F,{i18n:"es",modelValue:d.dateValue,"onUpdate:modelValue":s[0]||(s[0]=V=>d.dateValue=V),id:g.idDate,formatter:d.formatter,shortcuts:d.customShortcuts,placeholder:"Vigencia de la promoci\xF3n"},null,8,["modelValue","id","formatter","shortcuts"])])}const Vn=me(ke,[["render",$e]]),Se=["id","aria-describedby","value","zona"],Ae=["for"],Pe={__name:"SucursalCheckBox",setup(p){h("Parent");const s=h(["001","002","003","004","005","006","007","008","009","011","012","013","014","015","016","017","018","020","021","022","023","024","031","032","033","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","055","056","057","058","059","060","061","063","065","066","067","068","070","071","072","075","077","080"]);function g(d){switch(d){case"001":case"002":case"003":case"004":case"005":case"006":case"007":case"008":case"009":case"011":case"014":case"017":case"018":case"020":case"021":case"022":case"031":case"032":case"037":case"040":case"041":case"043":case"045":case"047":case"048":case"050":case"051":case"052":case"055":case"056":case"057":case"058":case"059":case"060":case"063":case"065":case"066":case"067":case"070":case"071":case"072":case"075":case"077":case"080":return 1;case"012":case"013":case"035":case"042":case"044":case"049":case"053":case"061":return 2;case"015":case"016":case"023":case"024":case"033":case"036":case"038":case"039":case"046":case"068":return 3;default:return 1}}return(d,k)=>(_(!0),B(D,null,X(s.value,m=>(_(),B("div",{key:m,class:"flex items-start items-center inline-flex mr-3 w-16"},[e("input",{id:"suc_"+m,"aria-describedby":"suc_"+m,type:"checkbox",value:m,class:"bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h1 my-1 w-4 rounded cursor-pointer py-2 disabled:opacity-50 disabled:cursor-not-allowed sucursal",zona:g(m)},null,8,Se),e("label",{for:"suc_"+m,class:"text-sm py-2 pl-3 font-medium cursor-pointer"},x(m),9,Ae)]))),128))}},Fe={props:{sucBase:{type:String,default:"1"}},components:{Sucursales:Pe,BaseButton:K},name:"Regiones",setup(p){return{dateValue:h([])}},methods:{seleccionarSucursales(p){switch(p.target.value){case"VALLES":this.marcarZona(1);break;case"COSTA":this.marcarZona(2);break;case"ISTMO":this.marcarZona(3);break;case"TODAS":this.marcarZona(4);break;default:this.desactivarSucursales(!0);break}},desmarcarSucursales(p){document.querySelectorAll("[zona]").forEach(g=>{g.checked=p})},desactivarSucursales(p){let s=document.querySelectorAll("[zona]");p?s.forEach(g=>{g.removeAttribute("disabled"),g.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),g.nextElementSibling.classList.add("cursor-pointer")}):s.forEach(g=>{g.setAttribute("disabled",!0),g.nextElementSibling.classList.remove("cursor-pointer"),g.nextElementSibling.classList.add("opacity-50","cursor-not-allowed")})},marcarZona(p=1){if(this.desmarcarSucursales(!1),this.desactivarSucursales(!1),p==4){document.querySelectorAll("[zona]").forEach(d=>{d.removeAttribute("disabled"),d.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),d.nextElementSibling.classList.add("cursor-pointer"),d.checked=!0});return}document.querySelectorAll('[zona="'+p+'"]').forEach(g=>{g.removeAttribute("disabled"),g.nextElementSibling.classList.remove("opacity-50","cursor-not-allowed"),g.nextElementSibling.classList.add("cursor-pointer"),g.checked=!0})},personalizado(){this.desactivarSucursales(!1)},limpiar(){this.desmarcarSucursales(!1),this.desactivarSucursales(!0),document.getElementById("zona-custom").checked=!0}}},Le={class:"grid grid-flow-col grid-rows-1"},Ke={class:"mx-5"},Ve={class:"max-w-lg mx-auto"},Me={class:"mb-1"},ze=e("legend",{class:"sr-only"}," Regiones ",-1),De=e("div",{class:"mb-3"},[e("h3",null,[e("b",null,"Regiones:")])],-1),Ne={class:"flex items-center mb-3 pl-2"},je=e("label",{for:"zona-valles",class:"text-sm font-medium pl-2 block"}," Valles ",-1),Te={class:"flex items-center mb-3 pl-2"},Oe=e("label",{for:"zona-costa",class:"text-sm font-medium pl-2 block"}," Costa ",-1),Re={class:"flex items-center mb-3 pl-2"},Ue=e("label",{for:"zona-istmo",class:"text-sm font-medium pl-2 block"}," Istmo ",-1),He={class:"flex items-center mb-3 pl-2"},qe=e("label",{for:"zona-todas",class:"text-sm font-medium pl-2 block"}," Todas ",-1),Ze={class:"flex items-center mb-1 pl-2"},Ye=e("label",{for:"zona-custom",class:"text-sm font-medium pl-2 block"}," Personalizado ",-1),Xe=he('<div class="max-w-lg mx-auto"><fieldset class=""><legend class="sr-only">Aplica para:</legend><div class="mt-2 mb-3"><h3><b>Aplica para:</b></h3></div><div class="flex items-start items-center mb-3 pl-2"><input id="mostrador" aria-describedby="checkbox-3" type="checkbox" name="mostrador" value="1" checked class="bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded"><label for="mostrador" class="text-sm pl-3 font-medium"> Mostrador </label></div><div class="flex items-start items-center mb-3 pl-2"><input id="retail" aria-describedby="checkbox-2" type="checkbox" name="retail" value="1" class="bg-gray-50 border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded"><label for="retail" class="text-sm pl-3 font-medium"> Retail </label></div></fieldset></div>',1),Ge={class:"flex justify-center"},Je={class:"px-5 mx-5 flex flex-wrap py-12",style:{height:"fit-content",margin:"auto"}};function Qe(p,s,g,d,k,m){const F=ce("BaseButton"),V=ce("Sucursales");return _(),B("div",Le,[e("div",Ke,[e("div",Ve,[e("fieldset",Me,[ze,De,e("div",Ne,[e("input",{id:"zona-valles",type:"radio",name:"zona",value:"VALLES",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-valles","aria-describedby":"zona-valles",onChange:s[0]||(s[0]=(...S)=>m.seleccionarSucursales&&m.seleccionarSucursales(...S))},null,32),je]),e("div",Te,[e("input",{id:"zona-costa",type:"radio",name:"zona",value:"COSTA",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-costa","aria-describedby":"zona-costa",onChange:s[1]||(s[1]=(...S)=>m.seleccionarSucursales&&m.seleccionarSucursales(...S))},null,32),Oe]),e("div",Re,[e("input",{id:"zona-istmo",type:"radio",name:"zona",value:"ISTMO",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-istmo","aria-describedby":"zona-istmo",onChange:s[2]||(s[2]=(...S)=>m.seleccionarSucursales&&m.seleccionarSucursales(...S))},null,32),Ue]),e("div",He,[e("input",{id:"zona-todas",type:"radio",name:"zona",value:"TODAS",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-todas","aria-describedby":"zona-todas",onChange:s[3]||(s[3]=(...S)=>m.seleccionarSucursales&&m.seleccionarSucursales(...S))},null,32),qe]),e("div",Ze,[e("input",{id:"zona-custom",type:"radio",name:"zona",value:"CUSTOM",class:"h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300","aria-labelledby":"zona-custom","aria-describedby":"zona-custom",onChange:s[4]||(s[4]=(...S)=>m.seleccionarSucursales&&m.seleccionarSucursales(...S)),checked:""},null,32),Ye]),i(F,{label:"Limpiar",id:"btn_clean_suc",otherClasses:"w-full mt-3",type:"button",small:!0,color:"info",onClick:m.limpiar},null,8,["onClick"])])]),Xe]),e("div",Ge,[e("div",Je,[i(V)])])])}const Mn=me(Fe,[["render",Qe]]),We=e("img",{src:ue,alt:"",class:"block mx-auto"},null,-1),et=e("p",null,"Favor de capturar un precio diferente a los actuales",-1),tt=e("img",{src:Ie,alt:"",class:"block mx-auto"},null,-1),nt=e("p",null,"Favor de capturar uno diferente o eliminar el existente",-1),ot=e("img",{src:Be,alt:"",class:"block mx-auto"},null,-1),lt={key:0},at=e("th",null,"C\xF3digo",-1),st=e("th",null,"Emp",-1),rt=e("th",null,"Precio Actual",-1),ct=e("th",null,"Precio Oferta",-1),it=e("th",null,"Diferencia",-1),dt=e("th",null,null,-1),ut={class:"rounded"},mt={class:"w-48 align-top",rowspan:"5"},pt=["onKeyup"],gt=e("p",{class:"mt-3",id:"desc_art"},null,-1),_t=e("td",{class:"w-8 text-center",id:"emp1"}," 1 ",-1),bt=e("td",{class:"text-right px-5",id:"precio1"},null,-1),ft={class:"w-1/3"},yt=e("td",{class:"text-right px-5",id:"dif1"},null,-1),ht={class:"before:hidden lg:w-1 whitespace-nowrap"},vt=e("td",{class:"w-8 text-center",id:"emp2"}," 1 ",-1),Ct=e("td",{id:"precio2",class:"text-right px-5"},null,-1),xt={"data-label":"pre_prm2"},Et=e("td",{class:"text-right px-5",id:"dif2"},null,-1),Bt={class:"before:hidden lg:w-1 whitespace-nowrap"},It=e("td",{class:"w-8 text-center",id:"emp3"}," 1 ",-1),kt=e("td",{id:"precio3",class:"text-right px-5"},null,-1),wt=e("td",{class:"text-right px-5",id:"dif3"},null,-1),$t={class:"before:hidden lg:w-1 whitespace-nowrap"},St=e("td",{class:"w-8 text-center",id:"emp4"}," 1 ",-1),At=e("td",{id:"precio4",class:"text-right px-5"},null,-1),Pt={"data-label":"pre_prm2"},Ft=e("td",{class:"text-right px-5",id:"dif4"},null,-1),Lt={class:"before:hidden lg:w-1 whitespace-nowrap"},Kt=e("td",{class:"w-8 text-center",id:"emp5"}," 1 ",-1),Vt=e("td",{id:"precio5",class:"text-right px-5"},null,-1),Mt=e("td",{class:"text-right px-5",id:"dif5"},null,-1),zt={class:"before:hidden lg:w-1 whitespace-nowrap"},zn={__name:"PreciosArticulosTable",props:{checkable:Boolean,arts:Array},setup(p){const s=p;pe(()=>{document.getElementsByClassName("pre"),document.getElementsByClassName("per")});const g=ie();N(()=>g.clients),h(!1);const d=h(!1),k=h(!1),m=h(!1),F=h(!1),V=h(!0),S=h(!1),G=h("");async function ee(t){let l=document.getElementById("sucbase").value,a=document.querySelectorAll(".sucursal");var u=0;for(let C=0;C<a.length;C++)a[C].checked&&u++;if(console.log(u),u==1){for(let C=0;C<a.length;C++)if(a[C].checked){l=a[C].value;break}}else l=document.getElementById("sucbase").value;let f=document.getElementById("prov").value.slice(0,9);await $(t.target.value,l,f)}var w={};async function $(t,l,a){let u="otro";S.value=!0,fetch(de+"art?art="+t+"&suc="+l+"&prov="+a+"&empaque="+u).then(function(f){S.value=!1,f.ok?(U(),f.json().then(C=>{w=C;let se=te(w);se&&(document.getElementById("pre_prom1").focus(),document.getElementsByName("tipo")[0].value!="6"?V.value=!1:O()),J(se)})):(f.json().then(async C=>{console.log(C),document.getElementById("desc_art").textContent=C.message,G.value=C.message,F.value=!0,await j(1500),F.value=!1,document.getElementsByName("tipo")[0].value=="6"&&O(-1)}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(f){console.log("Hubo un problema con la petici\xF3n Fetch:"+f.message)})}function O(t=0){if(t==-1){document.getElementById("cod_cob").value=null,document.getElementById("desc_art_cob").value=null;return}document.getElementById("cod_cob").value=w.art,document.getElementById("desc_art_cob").value=w.des1}function J(t){let l=document.getElementsByClassName("per"),a=document.getElementsByClassName("pre");[].forEach.call(l,u=>{t?u.removeAttribute("disabled"):u.setAttribute("disabled",!0),u.value=""}),[].forEach.call(a,u=>{t?u.removeAttribute("disabled"):u.setAttribute("disabled",!0),u.value=""})}function U(){for(let t=1;t<6;t++){let l=document.getElementById("precio"+t);l.textContent="";let a=document.getElementById("pre_prom"+t);a.classList.remove("ring","ring-red-500"),a.value="";let u=document.getElementById("emp"+t);u.textContent="";let f=document.getElementById("porcen_prom"+t);f.classList.remove("ring","ring-red-500"),f.value="",document.getElementById("dif"+t).textContent=""}}function te(t){return t.des1?(document.getElementById("desc_art").textContent=t.des1,document.getElementById("emp1").textContent=t.cant_pre0,document.getElementById("emp2").textContent=t.cant_pre1,document.getElementById("emp3").textContent=t.cant_pre2,document.getElementById("emp4").textContent=t.cant_pre3,document.getElementById("emp5").textContent=t.cant_pre4,document.getElementById("precio1").textContent=L(t.precio_vta0),document.getElementById("precio2").textContent=L(t.precio_vta1),document.getElementById("precio3").textContent=L(t.precio_vta2),document.getElementById("precio4").textContent=L(t.precio_vta3),document.getElementById("precio5").textContent=L(t.precio_vta4),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function L(t){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(t)}const E=function(t){var l=["-","+","e","ArrowDown","ArrowUp"];l.includes(t.key)&&t.preventDefault()},P=function(t){if(t.key=="Enter"||t.key=="ArrowDown"){let l=t.target.id,a=parseInt(l.slice(-1));if(a<5){a++;let u=l.slice(0,-1)+a;document.getElementById(u).focus();return}a==5&&document.getElementById("btn_add").focus()}if(t.key=="ArrowUp"){let l=t.target.id,a=parseInt(l.slice(-1));if(a>1){a--;let u=l.slice(0,-1)+a;document.getElementById(u).focus()}else a==1&&document.getElementById("inputConsultar").focus()}},c=function(t){let l=t.target.id.slice(-1),a=document.getElementById("pre_prom"+l),u=document.getElementById("porcen_prom"+l),f=document.getElementById("precio"+l).textContent.slice(1);f=f.replace(",",""),f=parseFloat(f);let C={};t.target==a?(C=n(f,a.value,""),u.value=C.porcentaje):(C=n(f,"",u.value),a.value=C.precio),document.getElementById("dif"+l).textContent=L(C.neta)};function n(t,l,a){let u={};if(l!="")u.precio=l,u.neta=Number((t-l).toFixed(4)).toFixed(4),u.porcentaje=Number((100-l*100/t).toFixed(4)).toFixed(4);else{let f=Number(t.toFixed(4)-(t*a/100).toFixed(4)).toFixed(4);u.precio=f,u.neta=Number(t-u.precio).toFixed(4),u.porcentaje=a}return u}function o(t){let l=t.target.id.slice(-1),a=document.getElementById("pre_prom"+l),u=document.getElementById("porcen_prom"+l),f=document.getElementById("precio"+l).textContent.slice(1);f=f.replace(",",""),f=parseFloat(f),f<a.value?(a.classList.add("ring","ring-red-500"),u.classList.add("ring","ring-red-500"),a.title="El precio de promoci\xF3n debe ser menor o igual al precio actual",u.title="El precio de promoci\xF3n debe ser menor o igual al precio actual"):(a.classList.remove("ring","ring-red-500"),u.classList.remove("ring","ring-red-500"),a.title="",u.title="")}function r(t){let a=t.target.closest("button").id.slice(-1),u=document.getElementById("pre_prom"+a),f=document.getElementById("porcen_prom"+a);f.value=0;let C=new InputEvent("input");f.dispatchEvent(C),c(C),u.focus()}const b=async function(){let t=A();if(y(t.cve)){m.value=!0,V.value=!0;return}if(t.cve==""&&t.precio1==""&&t.precio2==""&&t.precio3==""&&t.precio4==""&&t.precio5==""&&(k.value=!0),Object.keys(t).length!==0){s.arts.push(t),d.value=!0,U(),await j(500),d.value=!1;let l=document.getElementById("inputConsultar");l.value="",document.getElementById("desc_art").textContent="",l.focus()}else k.value=!0};function A(){let t={},l=[w.precio_vta0,w.precio_vta1,w.precio_vta2,w.precio_vta3,w.precio_vta4],a=document.getElementsByClassName("pre"),u=!1;for(let W=0;W<a.length;W++)if((a[W].value!=""||a[W].value>0)&&parseFloat(l[W])!=parseFloat(a[W].value)){u=!0;break}if(!u)return{};let f=w.art.trim(),C=document.getElementById("pre_prom1").value,se=document.getElementById("pre_prom2").value,_e=document.getElementById("pre_prom3").value,be=document.getElementById("pre_prom4").value,fe=document.getElementById("pre_prom5").value;return t.cve=f,t.precio1=C,t.precio2=se,t.precio3=_e,t.precio4=be,t.precio5=fe,t.des1=document.getElementById("desc_art").textContent,t}function y(t){for(let l=0;l<s.arts.length;l++)if(s.arts[l].cve==t)return!0;return!1}function j(t){return new Promise(l=>setTimeout(l,t))}function H(){let t=document.getElementById("inputConsultar").getAttribute("cve"),l=re(t);console.log(s.arts[l]),s.arts[l].precio1=document.getElementById("pre_prom1").value,s.arts[l].precio2=document.getElementById("pre_prom2").value,s.arts[l].precio3=document.getElementById("pre_prom3").value,s.arts[l].precio4=document.getElementById("pre_prom4").value,s.arts[l].precio5=document.getElementById("pre_prom5").value,Q()}function re(t){for(let l=0;l<s.arts.length;l++)if(s.arts[l].cve==t)return l;return-1}function Q(){U(),document.getElementById("desc_art").textContent="",document.getElementById("inputConsultar").value="",document.getElementById("btn_edit").classList.add("hidden"),document.getElementById("btn_cancel").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6"&&document.getElementById("btn_add").classList.remove("hidden")}return(t,l)=>(_(),B(D,null,[i(q,{hasFooter:!1,modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=a=>S.value=a),blocked:!0,title:"Cargando la informaci\xF3n"},{default:I(()=>[We]),_:1},8,["modelValue"]),i(q,{modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=a=>k.value=a),title:"No hubo cambio de Precio",button:"secondary",hasButton:""},{default:I(()=>[et]),_:1},8,["modelValue"]),i(q,{modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=a=>F.value=a),title:"Error al capturar el art\xEDculo",hasFooter:!1,titleClass:"mx-auto mb-3",blocked:!0},{default:I(()=>[tt,e("p",null,x(G.value),1)]),_:1},8,["modelValue"]),i(q,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=a=>m.value=a),title:"Art\xEDculo ya capturado",button:"secondary",hasButton:"",blocked:!0},{default:I(()=>[nt]),_:1},8,["modelValue"]),i(q,{hasFooter:!1,modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=a=>d.value=a),title:"Art\xEDculo agregado",blocked:!0},{default:I(()=>[ot]),_:1},8,["modelValue"]),e("table",null,[e("thead",null,[e("tr",null,[p.checkable?(_(),B("th",lt)):z("",!0),at,st,rt,ct,it,dt])]),e("tbody",ut,[e("tr",null,[p.checkable?(_(),Z(ne,{key:0,onChecked:l[5]||(l[5]=a=>t.checked(a,t.client))})):z("",!0),e("td",mt,[e("input",{type:"number",id:"inputConsultar",class:"px-3 py-2 max-w-full focus:ring focus:outline-none border border-gray-700 rounded w-full dark:placeholder-gray-400 bg-transparent text-right ring",onKeyup:[ve(ee,["enter"]),M(P,["prevent"])],onKeydown:E},null,40,pt),gt]),_t,bt,e("td",ft,[i(ae,{otherClasses:"mb-3",wrapClass:"row"},{default:I(()=>[i(T,{type:"number",icon:v(oe),id:"pre_prom1",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),i(T,{type:"number",icon:v(le),onKeydown:E,iconSide:"right",id:"porcen_prom1",onKeyup:M(P,["prevent"]),onInput:c,onChange:o,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),yt,e("td",ht,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"",onClick:r,id:"btn_erase1"},null,8,["icon"])]),_:1})])]),e("tr",null,[p.checkable?(_(),Z(ne,{key:0,onChecked:l[6]||(l[6]=a=>t.checked(a,t.client))})):z("",!0),vt,Ct,e("td",xt,[i(ae,{otherClasses:"mb-3",wrapClass:"row"},{default:I(()=>[i(T,{type:"number",icon:v(oe),id:"pre_prom2",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),i(T,{type:"number",icon:v(le),iconSide:"right",id:"porcen_prom2",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Et,e("td",Bt,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"",onClick:r,id:"btn_erase2"},null,8,["icon"])]),_:1})])]),e("tr",null,[p.checkable?(_(),Z(ne,{key:0,onChecked:l[7]||(l[7]=a=>t.checked(a,t.client))})):z("",!0),It,kt,e("td",null,[i(ae,{otherClasses:"mb-3",wrapClass:"row"},{default:I(()=>[i(T,{type:"number",icon:v(oe),id:"pre_prom3",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),i(T,{type:"number",icon:v(le),iconSide:"right",id:"porcen_prom3",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),wt,e("td",$t,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"",onClick:r,id:"btn_erase3"},null,8,["icon"])]),_:1})])]),e("tr",null,[p.checkable?(_(),Z(ne,{key:0,onChecked:l[8]||(l[8]=a=>t.checked(a,t.client))})):z("",!0),St,At,e("td",Pt,[i(ae,{otherClasses:"mb-3",wrapClass:"row"},{default:I(()=>[i(T,{type:"number",icon:v(oe),id:"pre_prom4",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),i(T,{type:"number",icon:v(le),id:"porcen_prom4",iconSide:"right",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Ft,e("td",Lt,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"",onClick:r,id:"btn_erase4"},null,8,["icon"])]),_:1})])]),e("tr",null,[p.checkable?(_(),Z(ne,{key:0,onChecked:l[9]||(l[9]=a=>t.checked(a,t.client))})):z("",!0),Kt,Vt,e("td",null,[i(ae,{otherClasses:"mb-3",wrapClass:"row"},{default:I(()=>[i(T,{type:"number",icon:v(oe),id:"pre_prom5",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,title:"",otherClasses:"text-right pre",parentClasses:"basis-2/3"},null,8,["icon","onKeyup"]),i(T,{type:"number",icon:v(le),iconSide:"right",id:"porcen_prom5",title:"",onKeyup:M(P,["prevent"]),onKeydown:E,onInput:c,onChange:o,otherClasses:"text-right per pl-0",parentClasses:"basis-1/3"},null,8,["icon","onKeyup"])]),_:1})]),Mt,e("td",zt,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"",onClick:r,id:"btn_erase5"},null,8,["icon"])]),_:1})])])])]),i(K,{label:"Agregar Art\xEDculo",id:"btn_add",type:"button",disabled:V.value,color:"info",onClick:b},null,8,["disabled"]),i(K,{label:"Actualizar Precios",id:"btn_edit",type:"button",otherClasses:"hidden mr-4",color:"success",onClick:H}),i(K,{label:"Cancelar",id:"btn_cancel",type:"button",otherClasses:"hidden",color:"danger",onClick:Q})],64))}},Dt=e("img",{src:ue,alt:"",class:"block mx-auto"},null,-1),Nt={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},jt={key:0},Tt=e("th",{class:"text-center"},"Art",-1),Ot=e("th",null,"Descripcion",-1),Rt=e("th",{class:"text-center"},"Precio1",-1),Ut=e("th",{class:"text-center"},"Precio2",-1),Ht=e("th",{class:"text-center"},"Precio3",-1),qt=e("th",{class:"text-center"},"Precio4",-1),Zt=e("th",{class:"text-center"},"Precio5",-1),Yt=e("th",null,null,-1),Xt=["data-label"],Gt=["data-label"],Jt=["data-label"],Qt=["data-label"],Wt=["data-label"],en=["data-label"],tn=["data-label"],nn={class:"before:hidden lg:w-1 whitespace-nowrap"},on={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Dn={__name:"TableArtCapturados",props:{checkable:Boolean,arts:Array},setup(p){const s=p;ie(),h(!1),h(!1);const g=h(5),d=h(0),k=h([]),m=N(()=>s.arts.slice(g.value*d.value,g.value*(d.value+1))),F=N(()=>Math.ceil(s.arts.length/g.value)),V=N(()=>d.value+1),S=N(()=>{const c=[];for(let n=0;n<F.value;n++)c.push(n);return c});function G(c){let n=ee(c);n<0||s.arts.splice(n,1)}function ee(c){for(let n=0;n<s.arts.length;n++)if(s.arts[n].cve==c)return n;return-1}const w=h(!1);async function $(c){let o=c.target.closest("td").getAttribute("data-label");console.log("A editar",o);let r=document.getElementById("sucbase").value,b=document.getElementById("prov").value.slice(0,9);w.value=!0,document.getElementById("inputConsultar").setAttribute("cve",o),await P(o,r,b)}const O=h({});function J(){for(let c=1;c<6;c++){let n=document.getElementById("precio"+c);n.textContent="";let o=document.getElementById("pre_prom"+c);o.classList.remove("ring","ring-red-500"),o.value="";let r=document.getElementById("emp"+c);r.textContent="";let b=document.getElementById("porcen_prom"+c);b.classList.remove("ring","ring-red-500"),b.value="",document.getElementById("dif"+c).textContent=""}}async function U(){document.getElementById("btn_add").classList.add("hidden"),document.getElementById("btn_edit").classList.remove("hidden"),document.getElementById("btn_cancel").classList.remove("hidden");let c=document.getElementById("inputConsultar"),n=document.getElementById("pre_prom1"),o=document.getElementById("pre_prom2"),r=document.getElementById("pre_prom3"),b=document.getElementById("pre_prom4"),A=document.getElementById("pre_prom5");c.value=O.value.art.trim(),console.log(s.arts);let y=te(O.value.art.trim());n.value=parseFloat(y.precio1),o.value=parseFloat(y.precio2),r.value=parseFloat(y.precio3),b.value=parseFloat(y.precio4),A.value=parseFloat(y.precio5)}function te(c){for(let n=0;n<s.arts.length;n++){const o=s.arts[n];if(o.cve==c)return o}return{}}function L(c){return c.des1?(document.getElementById("desc_art").textContent=c.des1,document.getElementById("emp1").textContent=c.cant_pre0,document.getElementById("emp2").textContent=c.cant_pre1,document.getElementById("emp3").textContent=c.cant_pre2,document.getElementById("emp4").textContent=c.cant_pre3,document.getElementById("emp5").textContent=c.cant_pre4,document.getElementById("precio1").textContent=E(c.precio_vta0),document.getElementById("precio2").textContent=E(c.precio_vta1),document.getElementById("precio3").textContent=E(c.precio_vta2),document.getElementById("precio4").textContent=E(c.precio_vta3),document.getElementById("precio5").textContent=E(c.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function E(c){return c==null||c==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(c)}async function P(c,n,o){let r="";fetch(de+"art?art="+c+"&suc="+n+"&prov="+o+"&empaque="+r).then(function(b){w.value=!1,b.ok?(J(),b.json().then(A=>{O.value=A,L(O.value)&&(U(),document.getElementById("pre_prom1").focus())})):(b.json().then(async A=>{document.getElementById("desc_art").textContent=A.message,errorMsg.value=A.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(b){console.log("Hubo un problema con la petici\xF3n Fetch:"+b.message)})}return(c,n)=>(_(),B(D,null,[i(q,{hasFooter:!1,modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=o=>w.value=o),blocked:!0,title:"Cargando la informaci\xF3n"},{default:I(()=>[Dt]),_:1},8,["modelValue"]),k.value.length?(_(),B("div",Nt,[(_(!0),B(D,null,X(k.value,o=>(_(),B("span",{key:o.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},x(o.name),1))),128))])):z("",!0),e("table",null,[e("thead",null,[e("tr",null,[p.checkable?(_(),B("th",jt)):z("",!0),Tt,Ot,Rt,Ut,Ht,qt,Zt,Yt])]),e("tbody",null,[(_(!0),B(D,null,X(v(m),o=>(_(),B("tr",{key:o.cve},[e("td",{"data-label":o.cve,class:"text-center cursor-pointer",onClick:$},x(o.cve),9,Xt),e("td",{"data-label":o.cve,onClick:$,class:"cursor-pointer"},x(o.des1),9,Gt),e("td",{"data-label":o.cve,class:"text-center cursor-pointer",onClick:$},x(E(o.precio1)),9,Jt),e("td",{"data-label":o.cve,class:"text-center cursor-pointer",onClick:$},x(E(o.precio2)),9,Qt),e("td",{"data-label":o.cve,class:"text-center cursor-pointer",onClick:$},x(E(o.precio3)),9,Wt),e("td",{"data-label":o.cve,class:"text-center cursor-pointer",onClick:$},x(E(o.precio4)),9,en),e("td",{"data-label":o.cve,class:"text-center cursor-pointer",onClick:$},x(E(o.precio5)),9,tn),e("td",nn,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"","data-label":o.cve,onClick:r=>G(o.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),e("div",on,[i(ge,null,{default:I(()=>[i(R,null,{default:I(()=>[(_(!0),B(D,null,X(v(S),o=>(_(),Z(K,{key:o,active:o===d.value,label:o+1,color:o===d.value?"lightDark":"whiteDark",small:"",onClick:r=>d.value=o},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"P\xE1gina "+x(v(V))+" de "+x(v(F)),1)]),_:1})])],64))}},ln=e("img",{src:ue,alt:"",class:"block mx-auto"},null,-1),an={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},sn={key:0},rn=e("th",{class:"text-center"},"Comprando",-1),cn=e("th",{class:"text-center"},"Emp",-1),dn=e("th",{class:"text-center"},"Art",-1),un=e("th",null,"Descripcion",-1),mn=e("th",{class:"text-center"},"Se regalan",-1),pn=e("th",{class:"text-center"},"Emp Reg",-1),gn=e("th",{class:"text-center"},"Art Reg",-1),_n=e("th",{class:""},"Descripcion regalo",-1),bn=e("th",{class:"text-center"},"Fac Min Reg",-1),fn=e("th",null,null,-1),yn=["data-label"],hn=["data-label"],vn=["data-label"],Cn=["data-label"],xn=["data-label"],En=["data-label"],Bn=["data-label"],In=["data-label"],kn=["data-label"],wn={class:"before:hidden lg:w-1 whitespace-nowrap"},$n={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Nn={__name:"TableArtCapturadosRegalo",props:{checkable:Boolean,arts:Array,campos:Object,Array},setup(p){const s=p;pe(async()=>{console.log(s.arts,"props value")}),ie(),h(!1),h(!1);const g=h(5),d=h(0),k=h([]),m=N(()=>s.arts.slice(g.value*d.value,g.value*(d.value+1))),F=N(()=>Math.ceil(s.arts.length/g.value)),V=N(()=>d.value+1),S=N(()=>{const n=[];for(let o=0;o<F.value;o++)n.push(o);return n});function G(n){let o=ee(n);o<0||(s.arts.splice(o,1),O())}function ee(n){for(let o=0;o<s.arts.length;o++)if(s.arts[o].cve==n)return o;return-1}const w=h(!1);async function $(n){let r=n.target.closest("td").getAttribute("data-label");document.getElementById("cod_cob").setAttribute("data-label",r);let b=s.campos,A=U(r),y=s.arts[A];if(b.cobradas=y.cobradas,b.regaladas=y.regaladas,b.fac_min_reg=y.emp_reg,b.fac_min_compra=y.emp_cob,b.fac_min_regalo=y.fac_min_reg,b.cod_reg=y.cod_reg,b.cve=y.cve,document.getElementById("desc_art_cob").value=y.des1,document.getElementById("desc_art_reg").value=y.desc_reg,document.getElementById("btn-upd-reg").classList.remove("hidden"),document.getElementById("btn-cancel-reg").classList.remove("hidden"),document.getElementById("add-reg").classList.add("hidden"),document.getElementsByName("tipo")[0].value!="6")return;let H=document.getElementById("sucbase").value;if(H=="-1"){let Q=document.getElementsByClassName("sucursal");for(let t=0;t<Q.length;t++)if(Q[t].checked){H=Q[t].value,console.log(H);break}}let re=document.getElementById("prov").value.slice(0,9);await c(r,H,re,y)}function O(){let n=s.campos;n.cobradas=1,n.regaladas=1,n.fac_min_reg="PZA",n.fac_min_compra="PZA",n.fac_min_regalo=1,n.cod_reg="",n.cod_cob="",n.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}const J=h({});function U(n){for(let o=0;o<s.arts.length;o++)if(s.arts[o].cve==n)return o;return-1}function te(n){return n.des1?(document.getElementById("desc_art").textContent=n.des1,document.getElementById("emp1").textContent=n.cant_pre0,document.getElementById("emp2").textContent=n.cant_pre1,document.getElementById("emp3").textContent=n.cant_pre2,document.getElementById("emp4").textContent=n.cant_pre3,document.getElementById("emp5").textContent=n.cant_pre4,document.getElementById("precio1").textContent=L(n.precio_vta0),document.getElementById("precio2").textContent=L(n.precio_vta1),document.getElementById("precio3").textContent=L(n.precio_vta2),document.getElementById("precio4").textContent=L(n.precio_vta3),document.getElementById("precio5").textContent=L(n.precio_vta4),document.getElementsByClassName("per"),!0):(document.getElementById("desc_art").textContent="C\xF3digo no encontrado",!1)}function L(n){return n==null||n==""?"--------":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(n)}async function E(n){let o=document.getElementById("inputConsultar"),r=document.getElementById("pre_prom1"),b=document.getElementById("pre_prom2"),A=document.getElementById("pre_prom3"),y=document.getElementById("pre_prom4"),j=document.getElementById("pre_prom5");console.log(n),console.log("precio 3",n.precio3,parseFloat(n.precio3)),o.value=n.cve,r.value=n.precio1!=""?parseFloat(n.precio1):null,b.value=n.precio2!=""?parseFloat(n.precio2):null,A.value=n.precio3!=""?parseFloat(n.precio3)+"":null,y.value=n.precio4!=""?parseFloat(n.precio4):null,j.value=n.precio5!=""?parseFloat(n.precio5):null}function P(){for(let n=1;n<6;n++){let o=document.getElementById("precio"+n);o.textContent="";let r=document.getElementById("pre_prom"+n);r.classList.remove("ring","ring-red-500"),r.value="";let b=document.getElementById("emp"+n);b.textContent="";let A=document.getElementById("porcen_prom"+n);A.classList.remove("ring","ring-red-500"),A.value="",document.getElementById("dif"+n).textContent=""}}async function c(n,o,r,b){let A="";fetch(de+"art?art="+n+"&suc="+o+"&prov="+r+"&empaque="+A).then(function(y){w.value=!1,y.ok?(P(),y.json().then(j=>{J.value=j,te(J.value)&&E(b)})):(y.json().then(async j=>{document.getElementById("desc_art").textContent=j.message,errorMsg.value=j.message,isModalNoEncontrado.value=!0,await sleep(1500),isModalNoEncontrado.value=!1}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(y){console.log("Hubo un problema con la petici\xF3n Fetch:"+y.message)})}return(n,o)=>(_(),B(D,null,[i(q,{hasFooter:!1,modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=r=>w.value=r),blocked:!0,title:"Cargando la informaci\xF3n"},{default:I(()=>[ln]),_:1},8,["modelValue"]),k.value.length?(_(),B("div",an,[(_(!0),B(D,null,X(k.value,r=>(_(),B("span",{key:r.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},x(r.name),1))),128))])):z("",!0),e("table",null,[e("thead",null,[e("tr",null,[p.checkable?(_(),B("th",sn)):z("",!0),rn,cn,dn,un,mn,pn,gn,_n,bn,fn])]),e("tbody",null,[(_(!0),B(D,null,X(v(m),r=>(_(),B("tr",{key:r.cve},[e("td",{"data-label":r.cve,class:"text-center cursor-pointer",onClick:$},x(parseFloat(r.cobradas)),9,yn),e("td",{"data-label":r.cve,class:"text-center cursor-pointer",onClick:$},x(r.emp_cob),9,hn),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer text-center"},x(r.cve),9,vn),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer"},x(r.des1),9,Cn),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer text-center"},x(parseFloat(r.regaladas)),9,xn),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer text-center"},x(r.emp_reg),9,En),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer text-center"},x(r.cod_reg),9,Bn),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer"},x(r.desc_reg),9,In),e("td",{"data-label":r.cve,onClick:$,class:"cursor-pointer text-center"},x(parseFloat(r.fac_min_reg)),9,kn),e("td",wn,[i(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:I(()=>[i(K,{color:"danger",icon:v(Y),small:"","data-label":r.cve,onClick:b=>G(r.cve)},null,8,["icon","data-label","onClick"])]),_:2},1024)])]))),128))])]),e("div",$n,[i(ge,null,{default:I(()=>[i(R,null,{default:I(()=>[(_(!0),B(D,null,X(v(S),r=>(_(),Z(K,{key:r,active:r===d.value,label:r+1,color:r===d.value?"lightDark":"whiteDark",small:"",onClick:b=>d.value=r},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"P\xE1gina "+x(v(V))+" de "+x(v(F)),1)]),_:1})])],64))}},Sn=["id"],jn={__name:"Accordion",props:{label:{type:String,default:null},labelFor:{type:String,default:null},help:{type:String,default:null},otherClasses:{type:String,default:null},id:{type:String,default:null}},setup(p){const s=p;Ce();const g=N(()=>["panel px-2 border-gray-700 border-t-0"]);N(()=>[" last:mb-0",s.otherClasses?s.otherClasses:""]);function d(k){k.target.classList.toggle("active");var m=k.target.nextElementSibling;m.style.maxHeight?(m.style.maxHeight=null,m.classList.remove("border-solid","rounded-b","border-2","pt-3","pb-4"),k.target.classList.remove("font-bold")):(m.classList.add("border-solid","rounded-b","border-2","pt-3","pb-4"),k.target.classList.add("font-bold"),m.style.maxHeight=m.scrollHeight+40+"px")}return(k,m)=>(_(),B(D,null,[p.label?(_(),B("button",{key:0,id:p.id,class:"block accordion hover:bg-blue-600 dark:hover:bg-blue-500 border-solid border-gray-700 rounded bg-gray dark:bg-slate-800 border-2 p-3",onClick:d},x(p.label),9,Sn)):z("",!0),e("div",{class:Ee(v(g))},[xe(k.$slots,"default")],2)],64))}};export{Vn as R,jn as _,Mn as a,zn as b,Dn as c,Nn as d,Ie as e};
