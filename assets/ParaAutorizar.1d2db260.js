import{_ as O}from"./loading.16b03cf4.js";import{p as V,d as B,b as r,v as k,o as a,c as l,F as g,K as $,C as n,D as m,a as t,Q as A,m as h,g as u,w as d,k as E,f as y,l as F,T as M,e as U,N as z,t as j,h as I,i as w,O as K,P as R}from"./index.c1189a9d.js";import{_ as H}from"./SectionTitleLine.c8f84d53.js";import{C as S}from"./CardBoxComponentEmpty.46105230.js";import{g as Q}from"./getData.5726d001.js";const q={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},G={class:"px-3"},J={key:0},W=t("th",{class:"text-center"},"ID PRM",-1),X=t("th",null,"Proveedor",-1),Y=t("th",null,"Descripcion",-1),Z=t("th",{class:"text-center"},"Fec Ini",-1),ee=t("th",{class:"text-center"},"Fec Fin",-1),te=t("th",{class:"text-center"},"Tipo",-1),ae=t("th",{class:"text-center"},"Estado",-1),se=t("th",null,null,-1),ne=["data-label"],le=["data-label"],oe=t("br",null,null,-1),re={class:"text-sm"},ce=["data-label"],ie={key:0,class:"text"},ue={key:1,class:"text-sm"},de=["data-label"],_e=["data-label"],me=["data-label"],he=["data-label","data-label1"],pe=["data-label"],be={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},fe={__name:"TablePrmCapAut",props:{checkable:Boolean,promos:[Array,Object]},setup(C){const v=C,p=s=>{switch(s){case"0":return"En revisi\xF3n";case"1":return"Autorizada";case"2":return"Descartada";case"-2":return"Eliminada";case"-1":default:return"Por revisar"}},P=s=>{switch(s=parseInt(s),s){case 1:return"Precio Promoci\xF3n";case 2:return"Combo";case 3:return"Precio espec\xEDfico";case 5:return"Mercanc\xEDa sin cargo";case 6:return"Precio + mercanc\xEDa sin cargo";default:return"no identificada"}},x=V(),b=B();r(!1),r(!1);const f=r(10),o=r(0),i=r([]),L=k(()=>v.promos.slice(f.value*o.value,f.value*(o.value+1))),N=k(()=>Math.ceil(v.promos.length/f.value)),D=k(()=>o.value+1),T=k(()=>{const s=[];for(let _=0;_<N.value;_++)s.push(_);return s});function c(s){let _=s.target.closest("td");b.numProm=_.getAttribute("data-label"),x.push({path:"/vistapromo/autorizar"})}return(s,_)=>(a(),l(g,null,[i.value.length?(a(),l("div",q,[(a(!0),l(g,null,$(i.value,e=>(a(),l("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},n(e.name),1))),128))])):m("",!0),t("table",G,[t("thead",null,[t("tr",null,[C.checkable?(a(),l("th",J)):m("",!0),W,X,Y,Z,ee,te,ae,se])]),t("tbody",null,[(a(!0),l(g,null,$(h(L),e=>(a(),l("tr",{key:e.id},[t("td",{"data-label":e.id+" "+e.tpoProm,to:"/capturar",onClick:c,class:"cursor-pointer text-center"},n(e.id),9,ne),e.nom_prov!=s.NULL?(a(),l("td",{key:0,"data-label":e.id+" "+e.tpoProm,onClick:c,class:"cursor-pointer"},[A(n(e.proveedor)+" ",1),oe,t("span",re,n(e.nom_prov.trim()),1)],8,le)):m("",!0),e.nom_prov==s.NULL?(a(),l("td",{key:1,"data-label":e.id+" "+e.tpoProm,onClick:c,class:"cursor-pointer"},[e.nom_prov==s.NULL?(a(),l("span",ie,n("COMBO"))):m("",!0),e.nom_prov!=s.NULL?(a(),l("span",ue,n(e.nom_prov.trim()),1)):m("",!0)],8,ce)):m("",!0),t("td",{"data-label":e.id+" "+e.tpoProm,onClick:c,class:"cursor-pointer"},n(e.desProm),9,de),t("td",{"data-label":e.id+" "+e.tpoProm,onClick:c,class:"cursor-pointer"},n(e.fec_ini),9,_e),t("td",{"data-label":e.id+" "+e.tpoProm,onClick:c,class:"cursor-pointer"},n(e.fec_fin),9,me),t("td",{"data-label":e.id+" "+e.tpoProm,"data-label1":e.tpoProm,class:"uppercase cursor-pointer text-center",onClick:c},n(P(e.tpoProm)),9,he),t("td",{"data-label":e.id+" "+e.tpoProm,class:"uppercase cursor-pointer text-center",onClick:c},n(p(e.status)),9,pe)]))),128))])]),t("div",be,[u(M,null,{default:d(()=>[u(E,null,{default:d(()=>[(a(!0),l(g,null,$(h(T),e=>(a(),y(F,{key:e,active:e===o.value,label:e+1,color:e===o.value?"lightDark":"whiteDark",small:"",onClick:ve=>o.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"P\xE1gina "+n(h(D))+" de "+n(h(N)),1)]),_:1})])],64))}},ke=t("img",{src:O,alt:"",class:"block mx-auto"},null,-1),Le={__name:"ParaAutorizar",setup(C){const v=B(),p=r(!0),P=r(!1),x=k(()=>b.value),b=r([]);r("/vistapromo/capturar");const f=async function(){let o=await Q(j+"prom-aut?compr="+v.nomCto);if(o.ok)await o.json().then(i=>{b.value=i});else return console.log("Respuesta de red OK pero respuesta HTTP no OK"),{}};return U(async function(){await f(),P.value=Object.keys(b).length>0,p.value=!1}),(o,i)=>(a(),y(z,null,{default:d(()=>[u(I,{hasFooter:!1,modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=L=>p.value=L),blocked:!0,title:"Cargando la informaci\xF3n"},{default:d(()=>[ke]),_:1},8,["modelValue"]),u(K,null,{default:d(()=>[u(H,{icon:h(R),title:"Promociones Para Autorizar",main:""},null,8,["icon"]),P.value?(a(),y(w,{key:0,class:"mb-6","has-table":""},{default:d(()=>[u(fe,{promos:h(x)},null,8,["promos"])]),_:1})):(a(),y(w,{key:1},{default:d(()=>[u(S)]),_:1}))]),_:1})]),_:1}))}};export{Le as default};
