import{v as le,b as g,r as ie,d as nl,e as dl,t as F,f as ae,w as r,N as sl,o as k,g as t,h as oe,a as v,C as N,W as ul,m as E,k as Ae,l as z,i as Pe,j as ke,c as J,K as Se,F as Me,O as Ue,X as we,D as te,p as il,ah as cl}from"./index.f9bcfea9.js";import{_ as ml}from"./loading.16b03cf4.js";import{_ as pl}from"./checked.4cad9791.js";import{_ as X,R as gl,a as vl,b as fl,c as bl,d as _l,e as yl}from"./Accordion.af20095e.js";import{_ as El}from"./FormCheckRadioGroup.589fe600.js";import{_ as d}from"./FormField.da86559f.js";import{_ as i}from"./FormControl.1379440f.js";import"./FormCheckRadio.d25395bd.js";const Bl=v("img",{src:ml,alt:"",class:"block mx-auto"},null,-1),Il=v("img",{src:pl,alt:"",class:"block mx-auto"},null,-1),Cl=v("img",{src:yl,alt:"",class:"block mx-auto"},null,-1),hl={class:"text-lg"},Vl={id:"prov_list"},Al=["value"],Pl={id:"ac_list"},kl=["value"],Sl=v("label",null,"Art\xEDculos Capturados: ",-1),Ml={key:1},Ul={class:"mx-auto mt-8"},wl=v("label",null,"Art\xEDculos Capturados: ",-1),Fl={__name:"EditarView",setup(Tl){const Te=il(),Z=[{id:"PZA",label:"PIEZA"},{id:"PAQ",label:"PAQUETE"},{id:"CJA",label:"CAJA"},{id:"BTO",label:"BULTO"},{id:"KGS",label:"KILOGRAMOS"},{id:"TIR",label:"TIRA"},{id:"EXH",label:"EXHIBIDOR"}],xe=["ene","feb","mar","abr","may","jun","jul","ago","sep","ago","oct","nov","dic"],ce=[{id:"001",label:"001"},{id:"002",label:"002"},{id:"003",label:"003"},{id:"012",label:"012"},{id:"013",label:"013"},{id:"015",label:"015"},{id:"024",label:"024"},{id:"-1",label:"Sucursal seleccionada"}],me=[{id:1,label:"Promoci\xF3n De Precio",default:!0},{id:5,label:"Mercanc\xEDa sin Cargo"},{id:6,label:"Precio + Mercanc\xEDa sin Cargo"}],pe=[{id:0,label:"Baja de precio",default:!0},{id:1,label:"Promoci\xF3n"}],Re=[{id:"CRED",label:"CR\xC9DITO"},{id:"CTDO",label:"CONTADO"},{id:"XCOB",label:"POR COBRAR"}],ge=[{id:1,label:"Paga Proveedor"},{id:2,label:"Paga MiniAbastos"},{id:3,label:"Pagan Ambos"}],S=[{id:"",label:"SELECCIONE UNO"},{id:"BAS",label:"TARJETA BASICA"},{id:"CON",label:"CONSUMO TIENDA"},{id:"ESP",label:"CLIENTE ESPECIAL"},{id:"EXP",label:"CLIENTE CREDITO EXPO"},{id:"INA",label:"INAPAM"},{id:"MAY",label:"PRUEBA SEG MAY"},{id:"MIN",label:"MINORISTAS"},{id:"MUJ",label:"MUJER"},{id:"PRF",label:"TARJETA PREFERENCIAL"},{id:"PRM",label:"TARJETA PREMIUM"},{id:"PUB",label:"PUBLICO"},{id:"RUT",label:"VENTA EN RUTA"}],Ne=le(()=>a),re=g(""),ne=g(""),de=g(""),D=g([]),m=le(()=>D.value);g([]);const a=ie({nombre:"",tipo:me[0].id,indicador:pe[0].id,proveedor:"",paga:ge[0].id,folioAcuerdo:"",limPzs:"",udsVenta:"",cantMin:"",montoMin:"",vigencia:"",fec_ini:"",fec_fin:"",aplicaSim:"",cliente:"",condPago:"",seg1:S[0].id,seg2:S[0].id,seg3:S[0].id,seg4:S[0].id,sucSelected:[],aplicaA:"",mostrador:null,retail:null,u_alta:"",precBase:ce[1].id,arts:D,cve:""});ie({});const P=nl(),ve=le(()=>w.value),w=g({}),L=le(()=>O.value),O=g({}),T=g(!1),C=g(""),q=g(!1),fe=()=>{};g(!0),g(0);async function De(){let o=P.numComprador;return await fetch(F+"prov?compr="+o+"&usr="+P.nomCto).then(async function(e){if(e.ok)await e.json().then(l=>(w.value=l,l));else return console.log("Respuesta de red OK pero respuesta HTTP no OK"),{}}).catch(function(e){return console.log("Hubo un problema con la petici\xF3n Fetch:"+e.message),{}})}async function be(){let o=P.numComprador,e=a.proveedor.trim().split(" ");return e=s.value.prom.proveedor,await fetch(F+"acuerdos?compr="+o+"&prov="+e+"&usr="+P.nomCto).then(async function(l){if(l.ok)await l.json().then(n=>(O.value=n,n));else return console.log("Respuesta de red OK pero respuesta HTTP no OK"),{}}).catch(function(l){return console.log("Hubo un problema con la petici\xF3n Fetch:"+l.message),{}})}async function Le(o){if(o.target.setAttribute("disabled",!0),M.value=!0,G.value!=""||Y.value!="")return j("El c\xF3digo capturado no existe, o no corresponde al proveedor seleccionado",o);if($e(a.cve))return console.log("Esta duplicada"),j("El art\xEDculo ya est\xE1 capturado",o);if(a.tipo==6){let l=document.getElementById("cod_cob");if(console.log(l.value,"codigo cobrado"),l.value==null)return console.log("el tipo de proo6 detono la promo"),j("El c\xF3digo capturado no existe, o no corresponde al proveedor seleccionado",o);a.cve=l.value.trim(),a.des1=document.getElementById("desc_art_cob").value}let e={};if(e.cve=a.cve,e.cod_reg=a.cod_reg,e.cobradas=a.cobradas,e.regaladas=a.regaladas,e.emp_cob=a.fac_min_compra,e.emp_reg=a.fac_min_reg,e.des1=document.getElementById("desc_art_cob").value,e.desc_reg=document.getElementById("desc_art_reg").value,e.fac_min_reg=a.fac_min_regalo,e.cve==""||e.cve==null||e.cod_reg==""||e.cod_reg==null||e.regaladas==""||e.regaladas==null||e.cobradas==""||e.cobradas==null||e.emp_cob==""||e.emp_cob==null||e.emp_reg==""||e.emp_reg==null||e.des1==""||e.des1==null||e.desc_reg==""||e.desc_reg==null||e.fac_min_reg==""||e.fac_min_reg==null)return j("Debe capturar todos los campos requeridos",o);a.tipo==6&&(document.getElementById("desc_art").textContent="",document.getElementById("inputConsultar").value="",document.getElementById("cod_cob").value="",e=Oe(e)),console.log(e),m.value.push(e),M.value=!1,o.target.removeAttribute("disabled"),se(),a.tipo==6&&ol()}function Oe(o){let e=document.getElementById("pre_prom1").value,l=document.getElementById("pre_prom2").value,n=document.getElementById("pre_prom3").value,u=document.getElementById("pre_prom4").value,p=document.getElementById("pre_prom5").value;return o.precio1=e,o.precio2=l,o.precio3=n,o.precio4=u,o.precio5=p,o}function qe(){console.log("Actualizando");let o={};if(o.cod_cob=a.cod_cob,o.cve=a.cve,o.cod_reg=a.cod_reg,o.cobradas=a.cobradas,o.regaladas=a.regaladas,o.emp_cob=a.fac_min_compra,o.emp_reg=a.fac_min_reg,o.desc_cob=document.getElementById("desc_art_cob").value,o.des1=document.getElementById("desc_art_cob").value,o.desc_reg=document.getElementById("desc_art_reg").value,o.fac_min_reg=a.fac_min_regalo,o.cve==""||o.cve==null||o.cod_reg==""||o.cod_reg==null||o.regaladas==""||o.regaladas==null||o.cobradas==""||o.cobradas==null||o.emp_cob==""||o.emp_cob==null||o.emp_reg==""||o.emp_reg==null||o.desc_cob==""||o.desc_cob==null||o.desc_reg==""||o.desc_reg==null||o.fac_min_reg==""||o.fac_min_reg==null)return j("Debe capturar todos los campos requeridos",event);let e=document.getElementById("cod_cob").getAttribute("data-label"),l=Fe(e),n=m.value[l];console.log("art modificado",o),console.log("art original",n),m.value[l]=o,a.tipo==6&&tl(l),document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden"),se()}function $e(o){console.log(m.value,"artscapturados");for(let e=0;e<m.value.length;e++)if(m.value[e].cve==o)return!0;return!1}function Fe(o){for(let e=0;e<m.value.length;e++)if(m.value[e].cve==o)return e;return-1}function se(){a.fac_min_reg=Z[0].id,a.fac_min_compra=Z[0].id,a.cobradas=1,a.regaladas=1,a.fac_min_regalo=1,a.cod_reg="",a.cve="",document.getElementById("desc_art_cob").value="",document.getElementById("desc_art_reg").value="",document.getElementById("btn-upd-reg").classList.add("hidden"),document.getElementById("btn-cancel-reg").classList.add("hidden"),document.getElementById("add-reg").classList.remove("hidden")}async function j(o,e){M.value=!1,C.value=o,q.value=!0,e.target.removeAttribute("disabled"),await ue(1500),q.value=!1}async function ze(o,e,l,n){M.value=!0,fetch(F+"art?art="+o+"&suc="+e+"&prov="+l).then(function(u){M.value=!1,u.ok?u.json().then(p=>{Q=p,n.value=o,console.log(Q),n.id=="cod_cob"?(G.value="",document.getElementById("desc_art_cob").value=p.des1):(Y.value="",document.getElementById("desc_art_reg").value=p.des1)}):(u.json().then(async p=>{C.value=p.message,q.value=!0,await ue(1500),q.value=!1,n.id=="cod_cob"?G.value=p.message:Y.value=p.message}),console.log("Respuesta de red OK pero respuesta HTTP no OK"))}).catch(function(u){console.log("Hubo un problema con la petici\xF3n Fetch:"+u.message),n.value=o})}const G=g(""),Y=g("");dl(async()=>{a.tipo=1,C.value="",await De(),await Ke(),await be(),document.getElementById("acc_desc").click(),document.getElementById("acc_prov").click(),document.getElementById("acc_suc").click(),await Xe(),await H(),M.value=!1,console.log(s.value),await We(s.value.suc),await _e();let o=document.getElementsByName("zona");for(let l=0;l<o.length;l++)o[l].addEventListener("change",je,!0);let e=document.querySelectorAll("[zona]");for(let l=0;l<e.length;l++)e[l].addEventListener("change",He,!0)});function je(o){switch(o.target.value){case"COSTA":a.precBase="013";break;case"ISTMO":a.precBase="024";break;case"VALLES":a.precBase="001";break;case"TODAS":a.precBase="001";break}}function He(o){document.getElementById("zona-valles");let e=document.getElementById("zona-costa"),l=document.getElementById("zona-istmo"),n=document.getElementById("zona-todas"),u=document.getElementById("zona-custom"),p=document.getElementById("suc_001"),$=document.getElementById("suc_013"),U=document.getElementById("suc_024");switch(document.getElementById("suc_003"),document.getElementById("suc_012"),document.getElementById("suc_015"),o.target.value){case"001":o.target.checked?a.precBase="001":$.checked?a.precBase="013":U.checked?a.precBase="024":a.precBase="003";break;case"013":o.target.checked?p.checked||(a.precBase="013"):e.checked?a.precBase="012":(u.checked||n.checked)&&(U.checked?a.precBase="024":a.precBase="003");break;case"024":o.target.checked?p.checked||(a.precBase="024"):l.checked&&(a.precBase="015");break;default:!o.target.checked&&!p.checked&&!$.checked&&!U.checked&&(n.checked||u.checked)&&(a.precBase="003");break}}async function _e(){if(a.tipo==5||a.tipo==6){let o=document.getElementById("cod_cob"),e=document.getElementById("art_reg");o.addEventListener("blur",ye,!0),e.addEventListener("blur",ye,!0)}a.tipo==6&&al()}var s=ie({});async function Ke(){let o=P.numComprador,e=P.numProm;return await fetch(F+"promocion?idprom="+e+"&compr="+o).then(async function(l){if(l.ok)await l.json().then(n=>(s.value=n,Q));else return{}}).catch(function(l){return console.log("Hubo un problema con la petici\xF3n Fetch:"+l.message),{}})}function Je(o){for(let e=0;e<w.value.length;e++)if(w.value[e].proveedor.includes(o))return w.value[e]}async function Xe(){a.nombre=s.value.prom.desProm,a.tipo=s.value.prom.tpoProm,Ge.value=s.value.prom.tpoProm=="1",Ee.value=s.value.prom.tpoProm,console.log("tipo promocion",a.tipo);let o=Je(s.value.prom.proveedor);a.proveedor=o.proveedor+" - "+o.nom,a.paga=s.value.prom.paga,a.folioAcuerdo=s.value.prom.folio_ac,a.limPzs=s.value.prom.uds_limite,a.udsVenta=s.value.prom.uds_por_cte,a.cantMin=s.value.prom.cantidad_minima,a.montoMin=s.value.prom.compra_minima,a.fec_ini=W(s.value.prom.fec_ini),a.fec_fin=W(s.value.prom.fec_fin),a.vigencia=a.fec_ini+" ~ "+a.fec_fin,document.getElementById("idvig").value=a.vigencia,s.value.prom.inc_similares=="S"?document.getElementsByName("similares")[0].checked=!0:document.getElementsByName("similares")[0].checked=!1,a.cliente=s.value.prom.cte,a.condPago=s.value.prom.con_pag,a.seg1=s.value.prom.seg_0,a.seg2=s.value.prom.seg_1,a.seg3=s.value.prom.seg_2,a.seg4=s.value.prom.seg_3,a.boletin=s.value.prom.boletin;let e=document.getElementById("mostrador"),l=document.getElementById("retail");s.value.prom.mostrador=="1"?e.checked=!0:e.checked=!1,s.value.prom.retail=="1"?l.checked=!0:l.checked=!1,a.u_alta=s.value.prom.u_alta,a.precBase=s.value.prom.suc_prec_base,W(s.value.prom.fec_ini),W(s.value.prom.fec_fin),ll(s.value.arts)}async function ye(o){o.target.id=="cod_cob"?document.getElementById("desc_art_cob"):document.getElementById("desc_art_reg");let e=o.target.value;document.getElementById("sucbase").value;let l=document.getElementById("prov").value.slice(0,9);a.sucSelected=he(),a.precBase=="-1"&&(a.precBase=a.sucSelected[0],console.log("antes de consultar",a.precBase,a.sucSelected[0])),await ze(e,a.precBase,l,o.target)}var Q={};function Ze(o){console.log(L);for(let e=0;e<L.value.length;e++)if(L.value[e].Folio==o.target.value){document.getElementById("boletin").value="",document.getElementById("boletin").value=L.value[e].boletin;return}}g(!1);const Ge=g(!0),Ee=g(),M=g(!0);function ue(o){return new Promise(e=>setTimeout(e,o))}async function Ye(o){let e=document.getElementById("cliente").value;if(o.target.classList.remove("ring","ring-red-500"),de.value="",e!="")return console.log("entra el else"),await fetch(F+"cliente?nCliente="+e).then(async function(l){if(l.ok)await l.json().then(n=>{O.value=n,console.log(n);var u=n.cve+"-"+n.nom;return document.getElementById("cliente").value=u,Q});else return o.target.classList.add("ring","ring-red-500"),de.value="El cliente no existe",console.log("Respuesta "),{}}).catch(function(l){return console.log("Hubo un problema con la petici\xF3n Fetch:"+l.message),{}})}async function H(o){var e=document.getElementById("seg1"),l=document.getElementById("seg2"),n=document.getElementById("seg3"),u=document.getElementById("seg4"),p=document.getElementById("seg1").selectedIndex,$=document.getElementById("seg2").selectedIndex,U=document.getElementById("seg3").selectedIndex,B=document.getElementById("seg4").selectedIndex,I="",h="",V="",A="";if(p!=-1&&(I=e.options[document.getElementById("seg1").selectedIndex].value),$!=-1&&(h=l.options[document.getElementById("seg2").selectedIndex].value),U!=-1&&(V=n.options[document.getElementById("seg3").selectedIndex].value),B!=-1&&(A=u.options[document.getElementById("seg4").selectedIndex].value),o=="seg1"){for(var I=e.options[document.getElementById("seg1").selectedIndex].value,c=0;c<l.length;c++){var f=l[c],b=n[c],_=u[c];f.value==V||f.value==A?f.disabled=!0:f.disabled=!1,b.value==h||b.value==A?b.disabled=!0:b.disabled=!1,_.value==h||_.value==V?_.disabled=!0:_.disabled=!1}let x=l.querySelector(`option[value="${I}"]`);x.disabled=!0;let R=n.querySelector(`option[value="${I}"]`);R.disabled=!0;let rl=u.querySelector(`option[value="${I}"]`);rl.disabled=!0}if(o=="seg2"){for(var c=0;c<l.length;c++){var y=e[c],b=n[c],_=u[c];y.value==V||y.value==A?y.disabled=!0:y.disabled=!1,b.value==I||b.value==A?b.disabled=!0:b.disabled=!1,_.value==I||_.value==V?_.disabled=!0:_.disabled=!1}let K=e.querySelector(`option[value="${h}"]`);K.disabled=!0;let x=n.querySelector(`option[value="${h}"]`);x.disabled=!0;let R=u.querySelector(`option[value="${h}"]`);R.disabled=!0}if(o=="seg3"){for(var c=0;c<l.length;c++){var y=e[c],f=l[c],_=u[c];y.value==h||y.value==A?y.disabled=!0:y.disabled=!1,f.value==I||f.value==A?f.disabled=!0:f.disabled=!1,_.value==I||_.value==h?_.disabled=!0:_.disabled=!1}let K=e.querySelector(`option[value="${V}"]`);K.disabled=!0;let x=l.querySelector(`option[value="${V}"]`);x.disabled=!0;let R=u.querySelector(`option[value="${V}"]`);R.disabled=!0}if(o=="seg4"){for(var c=0;c<e.length;c++){var y=e[c],f=l[c],b=n[c];y.value==h||y.value==V?y.disabled=!0:y.disabled=!1,f.value==I||f.value==V?f.disabled=!0:f.disabled=!1,b.value==I||b.value==h?b.disabled=!0:b.disabled=!1}let K=e.querySelector(`option[value="${A}"]`);K.disabled=!0;let x=l.querySelector(`option[value="${A}"]`);x.disabled=!0;let R=n.querySelector(`option[value="${A}"]`);R.disabled=!0}e[0].disabled=!0,l[0].disabled=!0,n[0].disabled=!0,u[0].disabled=!0}function Be(o){let e=document.querySelectorAll("[atr='requerido']");for(let B=0;B<e.length;B++)if(e[B].value==""||e[B].value==null){T.value=!0,C.value='El campo "'+e[B].name+'" no puede quedar vac\xEDo';return}let l=document.getElementById("idvig").value;if(l==""){T.value=!0,C.value='El campo "vigencia" no puede quedar vac\xEDo';return}let n=l.split("~");if(new Date(n[0]),new Date(n[1]),a.vigencia=l,a.fec_ini=Ce(n[0]),a.fec_fin=Ce(n[1]),console.log("fecha: ",a.fec_ini),console.log("fecha: ",a.fec_ini),m.value.length<1){T.value=!0,C.value="No captur\xF3 ning\xFAn art\xEDculo en la promoci\xF3n.",console.log("No capturo articulos");return}if(a.sucSelected=he(),console.log(a.sucSelected),a.sucSelected.length<1){T.value=!0,C.value="No seleccion\xF3 ninguna sucursal para aplicar la promoci\xF3n.";return}a.precBase=="-1"&&(a.precBase=a.sucSelected[0]);let u=document.getElementById("mostrador"),p=document.getElementById("retail");u.checked?a.mostrador=1:a.mostrador=0,p.checked?a.retail=1:a.retail=0,a.u_alta=P.nomCto;let $=a.proveedor.trim().split(" ");a.proveedor=$[0];let U={datos:a};console.log(U),Qe(F+"upd-prm?idprom="+P.numProm,U).then(async B=>{console.log("respuesta post"),console.log(B),"error"in B?(console.log("Tiene errores"),C.value="Ocurri\xF3 un error al guardar. "+B.error,T.value=!0):(console.log("NO tiene errores"),ee.value=!0,await ue(1500),ee.value=!1,Te.push({path:"/vistapromo/mis-capturas"}))})}function Ie(o){return o<10?"0"+o:""+o}function Ce(o){o=o.trim();let e=o.split(" "),l=Ie(xe.indexOf(e[1]+"")+1),n=e[2]+""+l+e[0];return console.log(n),n}async function Qe(o="",e={}){const l=await fetch(o,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)});return console.log(l),l.json()}function he(){let o=[],e=document.getElementsByClassName("sucursal");for(let l=0;l<e.length;l++)e[l].checked&&o.push(e[l].value);return o}async function We(o){let e=o;console.log(e);for(let l=0;l<e.length;l++)document.getElementById("suc_"+e[l].suc).checked=!0}async function el(o){a.proveedor,D.value=[],o.target.classList.remove("ring","ring-red-500"),re.value="";let e=!1,l=document.getElementById("acuerdo");a.folioAcuerdo="",l.removeAttribute("disabled"),l.classList.remove("ring","ring-red-500"),ne.value="";for(let n=0;n<w.value.length;n++)if(w.value[n].proveedor==a.proveedor.trim().split(" ")[0]){e=!0,console.log("si existe");break}e||(o.target.classList.add("ring","ring-red-500"),re.value="Proveedor no existe o no est\xE1 ligado a su usuario"),await be(),console.log(O.value),console.log(O.value.length==0),O.value.length==0&&(l.setAttribute("disabled",""),l.classList.add("ring","ring-red-500"),ne.value="No se encontr\xF3 ning\xFAn acuerdo ligado a este proveedor")}function W(o){let e=o.substring(0,4),l=o.substring(4,6),n=o.substring(6),u=new Date(e,parseInt(l)-1,n),p=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];return Ie(u.getDate())+" "+p[u.getMonth()]+" "+u.getFullYear()}function ll(o){console.log("lista capturados",o),D.value=[];let e={};for(let l=0;l<o.length;l++)e={},e.cve=o[l].cve_art,e.precio1=o[l].precio_0,e.precio2=o[l].precio_1,e.precio3=o[l].precio_2,e.precio4=o[l].precio_3,e.precio5=o[l].precio_4,e.des1=o[l].des_art,e.cobradas=parseFloat(o[l].cobradas),e.emp_cob="PZA",e.regaladas=parseFloat(o[l].regaladas),e.emp_reg=o[l].emp_reg,e.cod_reg=o[l].art_reg,e.desc_reg=o[l].desc_reg,e.fac_min_reg=parseFloat(o[l].fac_min_reg),D.value.push(e);console.log("lista final",D.value)}const ee=g(!1),Ve=function(o){var e=[".","-","+","e","ArrowDown","ArrowUp"];e.includes(o.key)&&o.preventDefault()};function al(){let o=document.getElementById("cod_cob");o.setAttribute("disabled",!0),o.classList.add("disabled:opacity-75"),document.getElementById("btn_add").classList.add("hidden")}function ol(){for(let o=1;o<6;o++){let e=document.getElementById("precio"+o);e.textContent="";let l=document.getElementById("pre_prom"+o);l.classList.remove("ring","ring-red-500"),l.value="";let n=document.getElementById("emp"+o);n.textContent="";let u=document.getElementById("porcen_prom"+o);u.classList.remove("ring","ring-red-500"),u.value="",document.getElementById("dif"+o).textContent=""}}function tl(o){m.value[o].precio1=document.getElementById("pre_prom1").value,m.value[o].precio2=document.getElementById("pre_prom2").value,m.value[o].precio3=document.getElementById("pre_prom3").value,m.value[o].precio4=document.getElementById("pre_prom4").value,m.value[o].precio5=document.getElementById("pre_prom5").value}return(o,e)=>(k(),ae(sl,null,{default:r(()=>[t(oe,{hasFooter:!1,modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=l=>M.value=l),blocked:!0,title:"Cargando la informaci\xF3n"},{default:r(()=>[Bl]),_:1},8,["modelValue"]),t(oe,{hasFooter:!1,modelValue:ee.value,"onUpdate:modelValue":e[1]||(e[1]=l=>ee.value=l),title:"Promoci\xF3n actualizada correctamente",blocked:!0},{default:r(()=>[Il]),_:1},8,["modelValue"]),t(oe,{modelValue:T.value,"onUpdate:modelValue":e[2]||(e[2]=l=>T.value=l),title:"No se pudo guardar la promoci\xF3n",button:"secondary",hasButton:""},{default:r(()=>[v("p",null,N(C.value),1)]),_:1},8,["modelValue"]),t(oe,{modelValue:q.value,"onUpdate:modelValue":e[3]||(e[3]=l=>q.value=l),title:"Error al capturar el art\xEDculo",hasFooter:!1,titleClass:"mx-auto mb-3",blocked:!0},{default:r(()=>[Cl,v("p",null,N(C.value),1)]),_:1},8,["modelValue"]),t(Ue,{id:"sect"},{default:r(()=>[t(ul,{title:"Editar Promoci\xF3n",hasBack:"/vistapromo/mis-capturas",alto:"h-8",ancho:"w-8"},{default:r(()=>[v("div",null,[v("h1",hl,"ID Promoci\xF3n: "+N(E(P).numProm),1)]),v("div",null,[t(Ae,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(z,{label:"Cancelar",color:"danger",small:"","data-label":"promo.id",to:"/vistapromo/mis-capturas"}),t(z,{color:"success",label:"Guardar cambios",small:"","data-label":"promo.id",onClick:Be})]),_:1})])]),_:1}),t(Pe,{form:"",onSubmit:ke(fe,["prevent"])},{default:r(()=>[t(X,{label:"Descripci\xF3n y Tipo",id:"acc_desc"},{default:r(()=>[t(d,null,{default:r(()=>[t(d,null,{default:r(()=>[t(d,null,{default:r(()=>[t(d,{label:"Nombre de la promoci\xF3n*"},{default:r(()=>[t(i,{type:"text",modelValue:a.nombre,"onUpdate:modelValue":e[4]||(e[4]=l=>a.nombre=l),attrr:"requerido",name:"nombre",id:"nom",required:"",otherClasses:"uppercase",placeholder:"Nombre de la promoci\xF3n*"},null,8,["modelValue"])]),_:1}),t(d,null,{default:r(()=>[t(d,null,{default:r(()=>[t(d,{label:"Tipo de promoci\xF3n*"},{default:r(()=>[t(i,{modelValue:a.tipo,"onUpdate:modelValue":e[5]||(e[5]=l=>a.tipo=l),options:me,attrr:"requerido",required:"",onChange:_e,name:"tipo",title:"Tipo De Promoci\xF3n*",otherClasses:"campo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(d,null,{default:r(()=>[t(d,{label:"Tipo de indicador*"},{default:r(()=>[t(i,{modelValue:a.indicador,"onUpdate:modelValue":e[6]||(e[6]=l=>a.indicador=l),options:pe,attrr:"requerido",required:"",name:"indicador",title:"Tipo De Indicador*",otherClasses:"campo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(X,{label:"Proveedor y Acuerdo",id:"acc_prov"},{default:r(()=>[t(d,null,{default:r(()=>[t(d,null,{default:r(()=>[t(d,{label:"Num Proveedor:*"},{default:r(()=>[t(i,{type:"text",id:"prov",modelValue:a.proveedor,"onUpdate:modelValue":e[7]||(e[7]=l=>a.proveedor=l),attrr:"requerido",name:"proveedor",otherClasses:"disabled:opacity-75 campo",placeholder:"N\xFAmero de Proveedor*",required:"",disabled:"",errorMsg:re.value,onChange:el,multiple:"",list:"prov_list",dataList:E(ve)},null,8,["modelValue","errorMsg","dataList"])]),_:1}),t(d,null,{default:r(()=>[t(d,{label:"Paga:*"},{default:r(()=>[t(i,{options:ge,modelValue:a.paga,"onUpdate:modelValue":e[8]||(e[8]=l=>a.paga=l),required:"",attrr:"requerido",name:"paga",otherClasses:"campo"},null,8,["modelValue"])]),_:1}),t(d,{label:"Folio Acuerdo:*"},{default:r(()=>[t(i,{type:"text",id:"acuerdo",dataList:E(L),multiple:"",list:"ac_list",required:"",attrr:"requerido",name:"folioAcuerdo",otherClasses:"campo",onChange:Ze,modelValue:a.folioAcuerdo,"onUpdate:modelValue":e[9]||(e[9]=l=>a.folioAcuerdo=l),errorMsg:ne.value,placeholder:"Folio de Acuerdo"},null,8,["dataList","modelValue","errorMsg"])]),_:1}),t(d,{label:"Bolet\xEDn:"},{default:r(()=>[t(i,{type:"text",modelValue:a.boletin,"onUpdate:modelValue":e[10]||(e[10]=l=>a.boletin=l),disabled:"",placeholder:"Bolet\xEDn",id:"boletin",otherClasses:"disabled:opacity-75"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),v("datalist",Vl,[(k(!0),J(Me,null,Se(E(ve),l=>(k(),J("option",{key:l.proveedor,value:l.proveedor+" - "+l.nom},N(l.proveedor),9,Al))),128))]),v("datalist",Pl,[(k(!0),J(Me,null,Se(E(L),l=>(k(),J("option",{key:l.folio,value:l.Folio},N(l.Folio),9,kl))),128))])]),_:1}),t(X,{label:"Restricciones",id:"acc_restric"},{default:r(()=>[t(d,{otherClasses:""},{default:r(()=>[t(d,{label:"Limitado a:"},{default:r(()=>[t(i,{type:"text",modelValue:a.limPzs,"onUpdate:modelValue":e[11]||(e[11]=l=>a.limPzs=l),name:"limPzs",otherClasses:"campo",placeholder:"Piezas"},null,8,["modelValue"])]),_:1}),t(d,{label:"Unidades por venta:"},{default:r(()=>[t(i,{type:"text",modelValue:a.udsVenta,"onUpdate:modelValue":e[12]||(e[12]=l=>a.udsVenta=l),name:"udsVenta",otherClasses:"campo",placeholder:"PZAS"},null,8,["modelValue"])]),_:1}),t(d,{label:"Cantidad m\xEDnima:"},{default:r(()=>[t(i,{type:"text",modelValue:a.cantMin,"onUpdate:modelValue":e[13]||(e[13]=l=>a.cantMin=l),name:"cantMin",otherClasses:"campo",placeholder:"PZS"},null,8,["modelValue"])]),_:1}),t(d,{label:"Monto compra m\xEDnima:"},{default:r(()=>[t(i,{type:"text",modelValue:a.montoMin,"onUpdate:modelValue":e[14]||(e[14]=l=>a.montoMin=l),name:"montoMin",otherClasses:"campo",placeholder:"$0.00"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(d,{otherClasses:"mt-3 mb-6 mx-3",label:"Vigencia*"},{default:r(()=>[t(gl,{idDate:"idvig",modelValue:a.vigencia,"onUpdate:modelValue":e[15]||(e[15]=l=>a.vigencia=l)},null,8,["modelValue"]),t(El,{class:"ml-3",attrr:"requerido",otherClasses:"campo",modelValue:a.aplicaSim,"onUpdate:modelValue":e[16]||(e[16]=l=>a.aplicaSim=l),name:"similares",type:"switch",id:"similares",options:{one:"Aplica similares"}},null,8,["modelValue"])]),_:1}),t(X,{label:"Cliente y Pago",id:"acc_cli"},{default:r(()=>[t(d,null,{default:r(()=>[t(d,{label:"Cliente:"},{default:r(()=>[t(i,{type:"text",modelValue:a.cliente,"onUpdate:modelValue":e[17]||(e[17]=l=>a.cliente=l),onChange:Ye,placeholder:"N\xFAmero de Cliente",id:"cliente",errorMsg:de.value},null,8,["modelValue","errorMsg"])]),_:1}),t(d,{label:"Condici\xF3n de Pago:"},{default:r(()=>[t(i,{options:Re,modelValue:a.condPago,"onUpdate:modelValue":e[18]||(e[18]=l=>a.condPago=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{label:"Segmentos de Mercado:",otherClasses:"mt-3"},{default:r(()=>[t(i,{modelValue:a.seg1,"onUpdate:modelValue":e[19]||(e[19]=l=>a.seg1=l),options:S,name:"seg1",id:"seg1",onChange:e[20]||(e[20]=l=>H("seg1")),title:"Segmento 1 mercado",otherClasses:"campo"},null,8,["modelValue"]),t(i,{modelValue:a.seg2,"onUpdate:modelValue":e[21]||(e[21]=l=>a.seg2=l),options:S,name:"seg2",id:"seg2",onChange:e[22]||(e[22]=l=>H("seg2")),title:"Segmento 2 mercado",otherClasses:"campo"},null,8,["modelValue"]),t(i,{modelValue:a.seg3,"onUpdate:modelValue":e[23]||(e[23]=l=>a.seg3=l),options:S,name:"seg3",id:"seg3",onChange:e[24]||(e[24]=l=>H("seg3")),title:"Segmento 3 mercado",otherClasses:"campo"},null,8,["modelValue"]),t(i,{modelValue:a.seg4,"onUpdate:modelValue":e[25]||(e[25]=l=>a.seg4=l),options:S,name:"seg4",id:"seg4",onChange:e[26]||(e[26]=l=>H("seg4")),title:"Segmento 4 mercado",otherClasses:"campo"},null,8,["modelValue"])]),_:1})]),_:1}),t(X,{label:"Aplica para:*",id:"acc_suc"},{default:r(()=>[t(d,null,{default:r(()=>[t(vl)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(Ue,{class:"pt-0"},{default:r(()=>[t(Pe,{CardBox:"",form:"",onSubmit:ke(fe,["prevent"])},{footer:r(()=>[]),default:r(()=>[t(d,{label:"Art\xEDculos"},{default:r(()=>[t(d,{label:"Precios seg\xFAn:"},{default:r(()=>[t(i,{options:ce,modelValue:a.precBase,"onUpdate:modelValue":e[27]||(e[27]=l=>a.precBase=l),id:"sucbase",name:"forzado",title:"Precios seg\xFAn: ",placeholder:"Precios seg\xFAn:"},null,8,["modelValue"])]),_:1}),v("div",null,[Sl,v("span",null,[v("b",null,N(E(m).length),1)])])]),_:1}),t(we),a.tipo==1||a.tipo==6?(k(),ae(fl,{key:0,arts:E(m)},null,8,["arts"])):te("",!0),a.tipo==5||a.tipo==6?(k(),J("div",Ml,[t(d,null,{default:r(()=>[t(d,{label:"Comprando:*"},{default:r(()=>[t(i,{modelValue:a.cobradas,"onUpdate:modelValue":e[28]||(e[28]=l=>a.cobradas=l),onKeydown:Ve,type:"number",name:"cobradas",otherClasses:"campo"},null,8,["modelValue"])]),_:1}),t(d,{label:"Emp:*"},{default:r(()=>[t(i,{options:Z,modelValue:a.fac_min_compra,"onUpdate:modelValue":e[29]||(e[29]=l=>a.fac_min_compra=l),name:"emp_cob",otherClasses:"campo"},null,8,["modelValue"])]),_:1}),t(d,{label:"Del C\xF3digo:*"},{default:r(()=>[t(i,{type:"text",id:"cod_cob",modelValue:a.cve,"onUpdate:modelValue":e[30]||(e[30]=l=>a.cve=l),name:"cod_cob",otherClasses:"campo",errorMsg:G.value},null,8,["modelValue","errorMsg"])]),_:1}),t(d,{label:"Descripci\xF3n"},{default:r(()=>[t(i,{type:"text",disabled:"",id:"desc_art_cob"})]),_:1})]),_:1}),t(d,{class:"mt-4"},{default:r(()=>[t(d,{label:"Se regalan:*"},{default:r(()=>[t(i,{modelValue:a.regaladas,"onUpdate:modelValue":e[31]||(e[31]=l=>a.regaladas=l),type:"number",onKeydown:Ve,name:"regaladas",otherClasses:"campo"},null,8,["modelValue"])]),_:1}),t(d,{label:"Emp:*"},{default:r(()=>[t(i,{options:Z,modelValue:a.fac_min_reg,"onUpdate:modelValue":e[32]||(e[32]=l=>a.fac_min_reg=l),name:"emp_reg",otherClasses:"campo"},null,8,["modelValue"])]),_:1}),t(d,{label:"Del C\xF3digo:*"},{default:r(()=>[t(i,{type:"text",id:"art_reg",modelValue:a.cod_reg,"onUpdate:modelValue":e[33]||(e[33]=l=>a.cod_reg=l),name:"art_reg",otherClasses:"campo",errorMsg:Y.value},null,8,["modelValue","errorMsg"])]),_:1}),t(d,{label:"De Regalo"},{default:r(()=>[t(i,{type:"text",disabled:"",id:"desc_art_reg"})]),_:1}),t(d,{label:"Fac Min Reg",help:"ATENCI\xD3N: Se recomienda no modificar este valor"},{default:r(()=>[t(i,{type:"number",modelValue:a.fac_min_regalo,"onUpdate:modelValue":e[34]||(e[34]=l=>a.fac_min_regalo=l),placeholder:"1",id:"fac_min_reg"},null,8,["modelValue"])]),_:1}),v("div",Ul,[t(Ae,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(z,{id:"add-reg",color:"success",class:"f-left",label:"Agregar art\xEDculo",onClick:Le}),t(z,{color:"success",class:"f-left hidden",label:"Actualizar art\xEDculo",id:"btn-upd-reg",onClick:qe}),t(z,{color:"danger",class:"f-left hidden",label:"Cancelar",onClick:se,id:"btn-cancel-reg"})]),_:1})])]),_:1})])):te("",!0),t(we),v("div",null,[wl,v("span",null,[v("b",null,N(E(m).length),1)])]),Ee.value=="1"?(k(),ae(bl,{key:2,arts:E(m)},null,8,["arts"])):te("",!0),a.tipo=="5"||a.tipo=="6"?(k(),ae(_l,{key:3,campos:E(Ne),arts:E(m)},null,8,["campos","arts"])):te("",!0)]),_:1},8,["onSubmit"]),t(z,{label:"Guardar nuevos datos",id:"btn_save",type:"submit",class:"mt-4 w-full",icon:E(cl),color:"success",onClick:e[35]||(e[35]=l=>Be())},null,8,["icon"])]),_:1})]),_:1}))}};export{Fl as default};
